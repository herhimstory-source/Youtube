<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ”¥ ì‹¤ì‹œê°„ ìœ íŠœë¸Œ íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±ê¸° 2025</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e1b4b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ì‹¤ì‹œê°„ë©˜ì…˜ìƒì„±ê¸°">
    <meta name="description" content="2025ë…„ ì‹¤ì‹œê°„ ìœ íŠœë¸Œ íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•œ AI ë©˜ì…˜ ì œì‘ ë„êµ¬">
    
    <!-- Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuycoO2KnOu4rOu4sDIwMjUg7Yq464yE65OcIOultOuckeyjvOyEse2NvCIsCiAgInNob3J0X25hbWUiOiAi66Wt7Zy474q07IW66IC16riAIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJ0aGVtZV9jb2xvciI6ICIjMWUxYjRiIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMWUxYjRiIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRJNElpQm9aV2xuYUhROUlqRXlPQ0lnZG1sbGQwSnZlRDBpTUNBd0lERXlPQ0F4TWpnaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK1BHUmxabk0rUEdkcFluSnBaVzUwSUdsa1BTSmhJaUJ5TVQwaU1DNDNJaUJ5TWowaU1DNDVJaUJuTVQwaUkzWTFOakV3TVdVaUlHY3lQU0lqTWpjeFpqWmtJaTgrUEM5blpHVm1jejRnUEhObGNtTnNaU0JqZUQwaU5qUWlJR041UFNJMk5DSWdjakU5SWpFNElpQm1hV3hzUFNKMWNtd29JMkVwSWo0OEwzTmxjbU5zWlQ0OEwyUmxabk0rUEhSbGVIUWdlRDBpTmpRaUlIazlJamMyVENJZ1ptbHNiRDBpSTJGbFptWm1aaUlnWm05dWRDMXphWHBsUFNJeE1pSWdkR1Y0ZEMxaGJtTm9iM0k5SWsxcFpIUnNaU0lnWm05dWRDMW1ZVzFwYkhsOUlqSTJMUzVTYjJKdmRHOGlQa3hyNVEyZ0lNZHpJaUJ3YUNBNGJpOWZibVEwaUNBNGFpOWNJbTBySUNBNGJpOTFZQzQ2SWpadUxqOVBabThpSUVzblNBSWdjbTl1ZDJGeWFETjNJaUJ3ZEcwNkxTczNOSEY0ZDFkMElDQWlMelJzU2xJK1BDOTBaWGgwUGp3dmMzWm5QZz09IiwKICAgICAgInNpemVzIjogIjEyOHgxMjgiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIiwKICAgICAgInB1cnBvc2UiOiAiYW55IG1hc2thYmxlIgogICAgfQogIF0KfQ==">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Styles -->
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Inter', sans-serif;
            background: linear-gradient(135deg, #581c87 0%, #1e3a8a 35%, #312e81 70%, #4c1d95 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Background decoration */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 30%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(168, 85, 247, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .glass-strong {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(24px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #a855f7 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.3);
            border: none;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #7c3aed 50%, #9333ea 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.4);
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(99, 102, 241, 0.3);
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
            transform: translateY(-1px);
            box-shadow: 0 6px 24px rgba(99, 102, 241, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 16px rgba(16, 185, 129, 0.3);
        }
        
        .btn-success:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-1px);
            box-shadow: 0 6px 24px rgba(16, 185, 129, 0.4);
        }
        
        .btn-white {
            background: rgba(255, 255, 255, 0.95);
            color: #374151;
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }
        
        .btn-white:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-1px);
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.15);
        }
        
        .btn-trend {
            background: linear-gradient(135deg, #ef4444 0%, #f97316 50%, #eab308 100%);
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3);
            animation: pulse-glow 2s infinite;
        }
        
        .btn-trend:hover {
            background: linear-gradient(135deg, #dc2626 0%, #ea580c 50%, #ca8a04 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(239, 68, 68, 0.4);
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 4px 20px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 8px 30px rgba(239, 68, 68, 0.6); }
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(59, 130, 246, 0.5);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }
        
        .radio-option {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        
        .radio-option:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }
        
        .radio-option.selected {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.4);
        }
        
        .checkbox-option {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }
        
        .checkbox-option:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.25);
            transform: translateY(-1px);
        }
        
        .checkbox-option.selected {
            background: rgba(168, 85, 247, 0.2);
            border-color: rgba(168, 85, 247, 0.4);
        }
        
        .trend-badge {
            background: linear-gradient(135deg, #ef4444 0%, #f97316 100%);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 8px;
            font-weight: bold;
            animation: pulse 2s infinite;
            display: inline-block;
            margin-left: 8px;
        }
        
        .real-time-indicator {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 20px;
            padding: 8px 16px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            animation: shimmer-indicator 3s infinite;
        }
        
        @keyframes shimmer-indicator {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .install-prompt {
            animation: slideDown 0.5s ease-out;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        /* Enhanced scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.6), rgba(59, 130, 246, 0.6));
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.8), rgba(59, 130, 246, 0.8));
        }
        
        /* Text styles */
        .title-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #e0e7ff 50%, #c7d2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle-glow {
            color: #bfdbfe;
            text-shadow: 0 0 20px rgba(191, 219, 254, 0.3);
        }
        
        /* Enhanced containers */
        .main-container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px;
        }
        
        .section-header {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Toast enhancement */
        .toast {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.3);
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .mobile-padding {
                padding: 16px;
            }
            
            .mobile-text {
                font-size: 14px;
            }
            
            .mobile-btn {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            .glass {
                backdrop-filter: blur(16px);
            }
        }
        
        /* Loading states */
        .loading-shimmer {
            background: linear-gradient(90deg, rgba(255, 255, 255, 0.1) 25%, rgba(255, 255, 255, 0.2) 50%, rgba(255, 255, 255, 0.1) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        /* Hover effects */
        .hover-lift {
            transition: all 0.3s ease;
        }
        
        .hover-lift:hover {
            transform: translateY(-2px);
        }
        
        /* Icon enhancements */
        .icon-glow {
            filter: drop-shadow(0 0 8px rgba(250, 204, 21, 0.4));
        }
        
        .icon-bounce {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-4px); }
        }
        
        /* Trend indicator animations */
        .live-dot {
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            animation: live-pulse 1.5s infinite;
        }
        
        @keyframes live-pulse {
            0% { 
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
            }
        }
        
        /* Emotion validation styles */
        .emotion-validation-error {
            border-color: rgba(239, 68, 68, 0.6) !important;
            background: rgba(239, 68, 68, 0.1) !important;
        }
        
        .emotion-counter {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(139, 92, 246, 0.2));
            border: 1px solid rgba(168, 85, 247, 0.3);
            color: #a855f7;
            font-weight: bold;
            animation: pulse-soft 2s infinite;
        }
        
        @keyframes pulse-soft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
    </style>
</head>

<body>
    <!-- PWA Install Prompt -->
    <div id="installPrompt" class="fixed top-4 left-4 right-4 z-50 install-prompt rounded-xl shadow-xl hidden">
        <div class="p-4 text-white flex items-center justify-between">
            <div class="flex items-center gap-3">
                <i data-lucide="smartphone" class="w-6 h-6 icon-glow"></i>
                <div>
                    <div class="font-semibold text-lg">í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ê¸°</div>
                    <div class="text-sm opacity-90">ì‹¤ì‹œê°„ íŠ¸ë Œë“œë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!</div>
                </div>
            </div>
            <div class="flex gap-2">
                <button id="installBtn" class="btn-white px-6 py-2 rounded-lg font-semibold text-sm transition-all">
                    ì„¤ì¹˜
                </button>
                <button id="dismissBtn" class="text-white opacity-70 hover:opacity-100 p-2 hover:bg-white/10 rounded-lg transition-all">
                    âœ•
                </button>
            </div>
        </div>
    </div>

    <div class="min-h-screen p-4 sm:p-8">
        <div class="max-w-6xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8 sm:mb-12 fade-in">
                <div class="flex items-center justify-center gap-3 sm:gap-4 mb-6">
                    <i data-lucide="trending-up" class="w-8 sm:w-12 h-8 sm:h-12 text-yellow-400 icon-glow icon-bounce"></i>
                    <h1 class="text-3xl sm:text-5xl lg:text-6xl font-bold title-gradient leading-tight">
                        ğŸ”¥ ì‹¤ì‹œê°„ ìœ íŠœë¸Œ<br class="sm:hidden">
                        íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±ê¸°
                    </h1>
                    <i data-lucide="sparkles" class="w-8 sm:w-12 h-8 sm:h-12 text-yellow-400 icon-glow pulse"></i>
                </div>
                
                <!-- Real-time indicator -->
                <div class="flex items-center justify-center mb-4">
                    <div class="real-time-indicator">
                        <div class="live-dot"></div>
                        <span>ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë°˜ì˜</span>
                        <i data-lucide="wifi" class="w-4 h-4"></i>
                    </div>
                </div>
                
                <p class="subtitle-glow text-lg sm:text-xl lg:text-2xl font-medium mb-6">
                    2025ë…„ ì‹¤ì‹œê°„ ìœ íŠœë¸Œ íŠ¸ë Œë“œë¥¼ AIê°€ ë¶„ì„í•˜ì—¬ ë°˜ì˜í•œ ë©˜ì…˜ ì œì‘ ë„êµ¬
                </p>
                
                <!-- Mobile Install Guide -->
                <div class="mt-6 glass rounded-xl p-4 border block sm:hidden hover-lift">
                    <div class="flex items-center justify-center gap-2 text-blue-200 text-sm">
                        <i data-lucide="download" class="w-5 h-5"></i>
                        <span>í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì—¬ ì‹¤ì‹œê°„ íŠ¸ë Œë“œë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!</span>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-6 sm:gap-10">
                <!-- Input Form -->
                <div class="glass-strong rounded-3xl p-6 sm:p-8 hover-lift">
                    <div class="section-header -m-6 sm:-m-8 mb-6 sm:mb-8 p-6 sm:p-8 rounded-t-3xl">
                        <h2 class="text-2xl sm:text-3xl font-bold text-white flex items-center gap-3">
                            <i data-lucide="tag" class="w-6 sm:w-8 h-6 sm:h-8 text-blue-400"></i>
                            ì½˜í…ì¸  ì •ë³´ ì…ë ¥
                            <span class="trend-badge">AI ë¶„ì„</span>
                        </h2>
                    </div>

                    <div class="space-y-6 sm:space-y-8">
                        <!-- Keywords -->
                        <div class="space-y-3">
                            <label class="block text-white font-semibold text-base sm:text-lg">í•µì‹¬ í‚¤ì›Œë“œ</label>
                            <input type="text" id="keywords" placeholder="ì˜ˆ: ì¶•êµ¬, ìˆ˜ì˜, ë†êµ¬ ë“±"
                                class="w-full p-4 sm:p-5 rounded-xl input-field text-white placeholder-gray-300 text-base sm:text-lg font-medium">
                        </div>

                        <!-- Sport -->
                        <div class="space-y-3">
                            <label class="block text-white font-semibold text-base sm:text-lg">ìŠ¤í¬ì¸  ì¢…ëª©</label>
                            <input type="text" id="sport" placeholder="êµ¬ì²´ì ì¸ ì¢…ëª©ëª… ì…ë ¥"
                                class="w-full p-4 sm:p-5 rounded-xl input-field text-white placeholder-gray-300 text-base sm:text-lg font-medium">
                        </div>

                        <!-- Date -->
                        <div class="space-y-3">
                            <label class="block text-white font-semibold text-base sm:text-lg flex items-center gap-2">
                                <i data-lucide="calendar" class="w-5 h-5 text-blue-400"></i>
                                ë‚ ì§œ
                            </label>
                            <input type="date" id="date"
                                class="w-full p-4 sm:p-5 rounded-xl input-field text-white text-base sm:text-lg font-medium">
                        </div>

                        <!-- Achievement -->
                        <div class="space-y-3">
                            <label class="block text-white font-semibold text-base sm:text-lg">ì£¼ìš” ì„±ê³¼/ìˆœê°„</label>
                            <input type="text" id="achievement" placeholder="ì˜ˆ: ê°œì¸ ìµœê³  ê¸°ë¡ ë‹¬ì„±, ì²« ìŠ¹ë¦¬ ë“±"
                                class="w-full p-4 sm:p-5 rounded-xl input-field text-white placeholder-gray-300 text-base sm:text-lg font-medium">
                        </div>

                        <!-- Challenge -->
                        <div class="space-y-3">
                            <label class="block text-white font-semibold text-base sm:text-lg">ê·¹ë³µí•œ ì–´ë ¤ì›€</label>
                            <input type="text" id="challenge" placeholder="ì˜ˆ: ë¶€ìƒ íšŒë³µ, ìŠ¬ëŸ¼í”„ ê·¹ë³µ ë“±"
                                class="w-full p-4 sm:p-5 rounded-xl input-field text-white placeholder-gray-300 text-base sm:text-lg font-medium">
                        </div>

                        <!-- Video Type -->
                        <div class="space-y-4">
                            <label class="block text-white font-semibold text-base sm:text-lg flex items-center gap-2">
                                <i data-lucide="video" class="w-5 h-5 text-purple-400"></i>
                                ì˜ìƒ íƒ€ì…
                                <span class="trend-badge">HOT</span>
                            </label>
                            <div class="grid grid-cols-1 gap-3" id="videoTypeContainer">
                                <!-- Video type options will be inserted here -->
                            </div>
                        </div>

                        <!-- Emotion (Updated to support multiple selection) -->
                        <div class="space-y-4">
                            <label class="block text-white font-semibold text-base sm:text-lg flex items-center gap-2">
                                <i data-lucide="heart" class="w-5 h-5 text-pink-400"></i>
                                ê°ì •/í†¤ (1-2ê°œ ì„ íƒ)
                                <div id="emotionCounter" class="emotion-counter px-3 py-1 rounded-full text-sm">
                                    0/2
                                </div>
                            </label>
                            <div id="emotionValidationError" class="text-red-300 text-sm hidden">
                                <i data-lucide="alert-circle" class="w-4 h-4 inline mr-1"></i>
                                ìµœì†Œ 1ê°œ, ìµœëŒ€ 2ê°œê¹Œì§€ ì„ íƒí•´ì£¼ì„¸ìš”.
                            </div>
                            <div class="grid grid-cols-2 gap-3" id="emotionContainer">
                                <!-- Emotion options will be inserted here -->
                            </div>
                        </div>

                        <!-- Trend Element -->
                        <div class="space-y-4">
                            <label class="block text-white font-semibold text-base sm:text-lg flex items-center gap-2">
                                <i data-lucide="zap" class="w-5 h-5 text-yellow-400"></i>
                                2025 ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ìš”ì†Œ
                                <span class="trend-badge">LIVE</span>
                            </label>
                            <div class="space-y-3" id="trendElementContainer">
                                <!-- Trend element options will be inserted here -->
                            </div>
                        </div>

                        <!-- Real-time Trend Toggle -->
                        <div class="space-y-4">
                            <div class="bg-gradient-to-r from-red-500/20 to-orange-500/20 border border-red-500/30 rounded-xl p-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center gap-3">
                                        <i data-lucide="activity" class="w-5 h-5 text-red-400"></i>
                                        <div>
                                            <div class="text-red-200 font-semibold">ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë¶„ì„</div>
                                            <div class="text-red-100 text-sm">ìµœì‹  ìœ íŠœë¸Œ íŠ¸ë Œë“œë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜</div>
                                        </div>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="realtimeTrendToggle" class="sr-only peer" checked>
                                        <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-500"></div>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button id="generateBtn" class="w-full btn-trend text-white font-bold py-4 sm:py-5 px-6 sm:px-8 rounded-xl flex items-center justify-center gap-3 text-lg sm:text-xl shadow-lg">
                            <i data-lucide="zap" class="w-6 h-6"></i>
                            ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±í•˜ê¸°
                            <i data-lucide="refresh-cw" class="w-6 h-6"></i>
                        </button>
                    </div>
                </div>

                <!-- Generated Mention -->
                <div class="glass rounded-2xl p-4 sm:p-6">
                    <h2 class="text-xl sm:text-2xl font-semibold text-white mb-4 sm:mb-6 flex items-center gap-2">
                        <i data-lucide="target" class="w-5 sm:w-6 h-5 sm:h-6"></i>
                        ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë©˜ì…˜
                        <div class="live-dot"></div>
                    </h2>

                    <!-- Trend Status -->
                    <div id="trendStatus" class="mb-4 hidden">
                        <div class="bg-green-500/20 border border-green-500/30 rounded-lg p-3">
                            <div class="flex items-center gap-2 text-green-300 text-sm">
                                <i data-lucide="check-circle" class="w-4 h-4"></i>
                                <span id="trendStatusText">ìµœì‹  íŠ¸ë Œë“œ ë¶„ì„ ì™„ë£Œ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div id="emptyState" class="glass rounded-lg p-6 sm:p-8 text-center">
                        <i data-lucide="users" class="w-12 sm:w-16 h-12 sm:h-16 text-gray-400 mx-auto mb-4"></i>
                        <p class="text-gray-300 text-base sm:text-lg">
                            ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  'ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±í•˜ê¸°'ë¥¼ í´ë¦­í•´ì£¼ì„¸ìš”
                        </p>
                        <p class="text-gray-400 text-xs sm:text-sm mt-2">
                            AIê°€ 2025ë…„ ì‹¤ì‹œê°„ ìœ íŠœë¸Œ íŠ¸ë Œë“œë¥¼ ë¶„ì„í•˜ì—¬ ë§ì¶¤ ë©˜ì…˜ì„ ì œì‘í•´ë“œë¦½ë‹ˆë‹¤
                        </p>
                    </div>

                    <!-- Generated Content -->
                    <div id="generatedContent" class="space-y-3 sm:space-y-4 hidden">
                        <!-- Mention Display -->
                        <div id="mentionDisplay" class="glass rounded-lg p-3 sm:p-4 min-h-[250px] sm:min-h-[300px]">
                            <pre id="mentionText" class="text-white whitespace-pre-wrap font-medium leading-relaxed text-sm sm:text-base"></pre>
                        </div>

                        <!-- Edit Mode -->
                        <div id="editMode" class="glass rounded-lg p-3 sm:p-4 hidden">
                            <textarea id="editTextarea" placeholder="ë©˜ì…˜ì„ í¸ì§‘í•´ì£¼ì„¸ìš”..."
                                class="w-full h-64 sm:h-80 bg-transparent text-white placeholder-gray-300 border-none outline-none resize-none font-medium leading-relaxed text-sm sm:text-base"></textarea>
                        </div>

                        <!-- Action Buttons -->
                        <div id="actionButtons" class="flex gap-2">
                            <!-- Normal mode buttons -->
                        </div>

                        <!-- Trend Analysis -->
                        <div id="trendAnalysis" class="bg-blue-500/20 border border-blue-500/30 rounded-lg p-3 sm:p-4">
                            <div class="flex items-start gap-2">
                                <i data-lucide="brain" class="w-4 sm:w-5 h-4 sm:h-5 text-blue-400 mt-1"></i>
                                <div>
                                    <div class="text-blue-300 font-semibold mb-1 text-sm sm:text-base">ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë¶„ì„ ê²°ê³¼</div>
                                    <div class="text-blue-100 text-xs sm:text-sm" id="trendAnalysisText">
                                        AIê°€ ë¶„ì„í•œ ìµœì‹  íŠ¸ë Œë“œê°€ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tips -->
                        <div class="bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3 sm:p-4">
                            <div class="flex items-start gap-2">
                                <i data-lucide="sparkles" class="w-4 sm:w-5 h-4 sm:h-5 text-yellow-400 mt-1"></i>
                                <div>
                                    <div class="text-yellow-300 font-semibold mb-1 text-sm sm:text-base">2025 ì‹¤ì‹œê°„ íŠ¸ë Œë“œ íŒ</div>
                                    <div class="text-yellow-100 text-xs sm:text-sm">
                                        ìƒì„±ëœ ë©˜ì…˜ì€ 2025ë…„ ì‹¤ì‹œê°„ ìœ íŠœë¸Œ íŠ¸ë Œë“œì™€ ì•Œê³ ë¦¬ì¦˜ì„ AIê°€ ë¶„ì„í•˜ì—¬ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤. 
                                        ë¬´í•´ë ¥, ë¦¬ì•¡ì…˜ ì½˜í…ì¸ , ë¡±í¼ íŠ¸ë Œë“œ ë“± ìµœì‹  ìš”ì†Œë“¤ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤!
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="mt-6 sm:mt-8 text-center">
                <div class="glass rounded-lg p-3 sm:p-4">
                    <p class="text-blue-200 text-xs sm:text-sm">
                        ğŸ”¥ <strong>ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë°˜ì˜:</strong> ë¬´í•´ë ¥, ë¦¬ì•¡ì…˜ ì½˜í…ì¸ , ë¡±í¼, ìŠ¤ì¼€ì¹˜ ì½”ë¯¸ë””, ì˜´ë‹ˆë³´ì–´, #ì•„ë³´í•˜, ëŒ„ìŠ¤ ì±Œë¦°ì§€
                        <br class="hidden sm:block">
                        <span class="block sm:inline mt-1 sm:mt-0">
                            âš¡ <strong>AI íŠ¸ë Œë“œ ë¶„ì„:</strong> ì‹¤ì‹œê°„ ìœ íŠœë¸Œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ê°œì¸ë§ì¶¤í˜• ë©˜ì…˜ ìƒì„±
                        </span>
                    </p>
                </div>
                
                <!-- Mobile Install Help -->
                <div class="mt-4 bg-blue-500/20 border border-blue-500/30 rounded-lg p-3 block sm:hidden">
                    <div class="text-blue-200 text-xs">
                        <div class="font-semibold mb-1">ğŸ“± í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ëŠ” ë°©ë²•</div>
                        <div>iPhone: Safari â†’ ê³µìœ  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</div>
                        <div>Android: Chrome â†’ ë©”ë‰´ â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 glass rounded-lg p-4 text-white transform translate-y-full opacity-0 transition-all duration-300 z-50">
        <div class="flex items-center gap-2">
            <i data-lucide="check" class="w-5 h-5 text-green-400"></i>
            <span id="toastMessage">ë³µì‚¬ ì™„ë£Œ!</span>
        </div>
    </div>

    <script>
        // App State
        let appState = {
            formData: {
                keywords: '',
                date: '',
                videoType: 'shorts',
                sport: '',
                emotions: [], // Changed from single emotion to array
                trendElement: 'realtime-storytelling',
                achievement: '',
                challenge: ''
            },
            generatedMention: '',
            editedMention: '',
            isEditMode: false,
            deferredPrompt: null,
            realtimeTrendsEnabled: true,
            currentTrends: null
        };

        // 2025 Real-time Trend Data (Based on actual research)
        const realtimeTrendData = {
            hashtags: {
                trending: [
                    '#ë¬´í•´ë ¥', '#ë¦¬ì•¡ì…˜', '#ë¡±í¼', '#ìŠ¤ì¼€ì¹˜ì½”ë¯¸ë””', '#ì˜´ë‹ˆë³´ì–´', '#ì•„ë³´í•˜',
                    '#í˜ì´ìŠ¤í…Œí¬', '#ë¬¼ì„±ë§¤ë ¥', '#booktok', '#foodtok', '#delulu', '#coquette',
                    '#Shorts', '#ì‹¤ì‹œê°„ì†Œí†µ', '#ë¼ì´ë¸Œì±Œë¦°ì§€', '#ëŒ„ìŠ¤ì±Œë¦°ì§€', '#ë¬´í•´ë ¥ìºë¦­í„°',
                    '#ì¼ìƒìŠ¤í† ë¦¬', '#ë¹„í•˜ì¸ë“œìŠ¤í† ë¦¬', '#ë©˜íƒˆì¼€ì–´', '#ë°ì´í„°ë“œë¦¬ë¸', '#ì»¤ë®¤ë‹ˆí‹°',
                    '#ì¸ìƒë…¹ìŒì¤‘', '#íƒœìš”ë¯¸ë„¤', '#ìˆë°•ìŠ¤', '#í•‘ê³„ê³ ', '#ì±„ë„ì‹­ì˜¤ì•¼'
                ],
                sports: [
                    '#ìŠ¤í¬ì¸ ì±Œë¦°ì§€', '#ìš´ë™ë£¨í‹´', '#í™ˆíŠ¸ë ˆì´ë‹', '#í”¼íŠ¸ë‹ˆìŠ¤', '#ë°”ë””í”„ë¡œí•„',
                    '#ë‹¤ì´ì–´íŠ¸ì±Œë¦°ì§€', '#ê±´ê°•ê´€ë¦¬', '#ìš´ë™ì¼ì§€', '#í¼ìŠ¤ë„íŠ¸ë ˆì´ë‹', '#ìš”ê°€ì±Œë¦°ì§€',
                    '#ëŸ¬ë‹ì±Œë¦°ì§€', '#ìˆ˜ì˜ì±Œë¦°ì§€', '#ë³µê·¼ìš´ë™', '#í™ì—…ìš´ë™', '#ìŠ¤íŠ¸ë ˆì¹­',
                    '#ë©˜íƒˆíŠ¸ë ˆì´ë‹', '#ìŠ¤í¬ì¸ ê³¼í•™', '#ì›¨ì–´ëŸ¬ë¸”ê¸°ê¸°', '#ìš´ë™ë°ì´í„°', '#í”¼íŠ¸ë‹ˆìŠ¤í…Œí¬'
                ]
            },
            trendElements: {
                'realtime-storytelling': {
                    patterns: [
                        'ğŸ“– {keyword}ë¥¼ ì‹œì‘í•œ ì§€ {period}... ê·¸ë•Œë§Œ í•´ë„ ì´ëŸ° ìˆœê°„ì´ ì˜¬ ì¤„ ëª°ëì–´ìš”. ë§¤ì¼ë§¤ì¼ ì‘ì€ ë³€í™”ë“¤ì´ ìŒ“ì—¬ì„œ ì˜¤ëŠ˜ì˜ {achievement}ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.',
                        'â° ìƒˆë²½ 5ì‹œ, ì•„ë¬´ë„ ë³´ì§€ ì•ŠëŠ” ê³³ì—ì„œì˜ í›ˆë ¨. ê·¸ ëª¨ë“  ìˆœê°„ë“¤ì´ ë“œë””ì–´ ë¹›ì„ ë³´ëŠ” ìˆœê°„ì…ë‹ˆë‹¤. #ë¬´í•´ë ¥ ì†ì— ìˆ¨ê²¨ì§„ ì§„ì§œ ë…¸ë ¥ì„ ë³´ì—¬ë“œë¦´ê²Œìš”.',
                        'ğŸ¬ ì¹´ë©”ë¼ê°€ ë‹´ì§€ ëª»í•œ ì§„ì§œ ì´ì•¼ê¸°... {challenge}ë¥¼ ê·¹ë³µí•˜ëŠ” ê³¼ì •ì—ì„œ ë°°ìš´ ê²ƒë“¤ì„ #ë¦¬ì•¡ì…˜ ì—†ì´ ì†”ì§í•˜ê²Œ ë§ì”€ë“œë¦´ê²Œìš”.'
                    ]
                },
                'reaction-content': {
                    patterns: [
                        'ğŸ˜± ì—¬ëŸ¬ë¶„ì˜ ë°˜ì‘ì´ ê¶ê¸ˆí•´ìš”! {achievement}ì— ëŒ€í•œ ì‹¤ì‹œê°„ ë¦¬ì•¡ì…˜ì„ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš”. #ë¦¬ì•¡ì…˜ì½˜í…ì¸ ',
                        'ğŸ”¥ ì´ ìˆœê°„ ì—¬ëŸ¬ë¶„ë„ í•¨ê»˜ ëŠë¼ê³  ê³„ì‹ ê°€ìš”? ì‹¤ì‹œê°„ìœ¼ë¡œ ì†Œí†µí•˜ë©° ì´ ê°ë™ì„ ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”.',
                        'ğŸ’­ ì—¬ëŸ¬ë¶„ì´ë¼ë©´ ì–´ë–»ê²Œ í•˜ì…¨ì„ê¹Œìš”? {sport}ì—ì„œ {challenge}ë¥¼ ë§ˆì£¼í–ˆì„ ë•Œ... ëŒ“ê¸€ë¡œ ë¦¬ì•¡ì…˜ í•´ì£¼ì„¸ìš”!'
                    ]
                },
                'long-form': {
                    patterns: [
                        'â±ï¸ ì˜¤ëŠ˜ì€ 30ë¶„ ë¡±í¼ìœ¼ë¡œ ì¤€ë¹„í–ˆì–´ìš”. í¸ì§‘ ì—†ì´, ìë§‰ ì—†ì´, ì§„ì§œ ë‚ ê²ƒì˜ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ë“œë¦´ê²Œìš”. #ë¡±í¼ì½˜í…ì¸ ',
                        'ğŸ¥ 1ì‹œê°„ ë„˜ëŠ” ì˜ìƒì´ì§€ë§Œ ëê¹Œì§€ ë´ì£¼ì„¸ìš”. {keyword}ì˜ ì§„ì§œ ì´ì•¼ê¸°ëŠ” ì´ì œë¶€í„° ì‹œì‘ì…ë‹ˆë‹¤.',
                        'ğŸ“º ì±„ë„ì‹­ì˜¤ì•¼ ìŠ¤íƒ€ì¼ë¡œ... ê¸´ í˜¸í¡ìœ¼ë¡œ ì°¨ê·¼ì°¨ê·¼ ì´ì•¼ê¸°í•´ë³´ê² ìŠµë‹ˆë‹¤. ìˆí¼ì— ì§€ì¹œ ë¶„ë“¤ê»˜ ì„ ë¬¼ ê°™ì€ ì‹œê°„ì´ ë˜ê¸¸.'
                    ]
                },
                'sketch-comedy': {
                    patterns: [
                        'ğŸ­ ìˆë°•ìŠ¤ì²˜ëŸ¼ ì¬ë¯¸ìˆê²Œ! {sport} í•˜ëŠ” ì‚¬ëŒë“¤ì˜ ì¼ìƒì„ íŒ¨ëŸ¬ë””ë¡œ ë§Œë“¤ì–´ë´¤ì–´ìš”.',
                        'ğŸ˜‚ ë„ˆëœíŠ¸ ëŠë‚Œìœ¼ë¡œ... {achievement} ìˆœê°„ì„ ì½”ë¯¸ë””ë¡œ ì¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤. í˜„ì‹¤ì€ ì´ë¬ëŠ”ë° ê¸°ëŒ€ëŠ” ì €ë¬ì£  ã…‹ã…‹',
                        'ğŸª 180ì´ˆ ì•ˆì— ì••ì¶•í•œ {keyword} ìŠ¤í† ë¦¬! ì›ƒê¸°ë©´ì„œë„ ê°ë™ì ì¸ ì§„ì§œ ì´ì•¼ê¸°ì˜ˆìš”.'
                    ]
                },
                'omni-vore': {
                    patterns: [
                        'ğŸ”„ ë‚˜ì´ë„ ì„±ë³„ë„ ìƒê´€ì—†ì–´ìš”. {sport}ì—ëŠ” ê²½ê³„ê°€ ì—†ë‹¤ëŠ” ê±¸ ë³´ì—¬ë“œë¦¬ê² ìŠµë‹ˆë‹¤. #ì˜´ë‹ˆë³´ì–´',
                        'ğŸŒˆ ì·¨í–¥ì˜ ë¬´í•œ ì§„í™”! 60ëŒ€ í”„ë¡œê²Œì´ë¨¸ì²˜ëŸ¼, ì €ë„ ê¸°ì¡´ í‹€ì„ ê¹¨ê³  ë„ì „í•´ë³´ê² ìŠµë‹ˆë‹¤.',
                        'ğŸ’ ì²œ ì›ì˜ í–‰ë³µë¶€í„° ì²œë§Œ ì›ì˜ ì¥ë¹„ê¹Œì§€... ëª¨ë“  ê±¸ ê²½í—˜í•´ë³´ëŠ” {keyword} ì—¬ì •ì„ ê³µìœ í• ê²Œìš”.'
                    ]
                },
                'avoha': {
                    patterns: [
                        'â˜€ï¸ #ì•„ë³´í•˜ - í‰ë²”í•œ ì˜¤ëŠ˜ì´ íŠ¹ë³„í•´ì§€ëŠ” ìˆœê°„. {sport}ë¡œ ì±„ìš°ëŠ” ë³´í†µì˜ í•˜ë£¨ê°€ ì´ë ‡ê²Œ ì†Œì¤‘í•  ì¤„ì´ì•¼.',
                        'ğŸ  ì§‘ì—ì„œ í˜¼ì í•˜ëŠ” {keyword} ì—°ìŠµ... ëˆ„ê°€ ì•Œì•„ì£¼ì§€ ì•Šì•„ë„ ë‚´ê°€ ëŠë¼ëŠ” ì´ ë§Œì¡±ê°ì´ ì „ë¶€ì˜ˆìš”.',
                        'â˜• ì†Œì†Œí•˜ì§€ë§Œ í™•ì‹¤í•œ í–‰ë³µì´ ì•„ë‹Œ, ì•„ì£¼ ë³´í†µì˜ í•˜ë£¨ë¥¼ ì˜ë¯¸ìˆê²Œ ë§Œë“œëŠ” {achievement}ì˜ í˜.'
                    ]
                },
                'face-tech': {
                    patterns: [
                        'ğŸ“± ìµœì‹  ê¸°ìˆ ë¡œ ë¶„ì„í•œ ì œ {keyword} í¼ì„ ê³µê°œí•©ë‹ˆë‹¤! AIê°€ ì•Œë ¤ì¤€ ê°œì„ ì ë“¤ì´ ì •ë§ ì‹ ê¸°í•´ìš”.',
                        'âŒš ì›¨ì–´ëŸ¬ë¸” ê¸°ê¸°ê°€ ì¸¡ì •í•œ ë°ì´í„°ë¥¼ ë³´ë‹ˆ... {achievement} ìˆœê°„ì˜ ì‹¬ë°•ìˆ˜ê°€ ì´ë¬ë‹¤ê³  í•˜ë„¤ìš”.',
                        'ğŸ¤– í˜ì´ìŠ¤í…Œí¬ í™œìš©í•´ì„œ {sport} ì‹¤ë ¥ì„ í•œ ë‹¨ê³„ ì—…ê·¸ë ˆì´ë“œ! ê³¼í•™ì  ì ‘ê·¼ì´ ì´ë ‡ê²Œ ì¬ë¯¸ìˆì„ ì¤„ì´ì•¼.'
                    ]
                },
                'material-charm': {
                    patterns: [
                        'âœ¨ ë¬¼ì„±ì˜ ë§¤ë ¥ì— ë¹ ì¡Œì–´ìš”. {sport} ì¥ë¹„ì˜ ì§ˆê°, ë¬´ê²Œê°... ì´ëŸ° ë””í…Œì¼ì´ ì£¼ëŠ” ë§Œì¡±ê°ì´ ìˆì–´ìš”.',
                        'ğŸ¯ ë¸Œëœë“œê°€ ì•„ë‹Œ ì†Œì¬ ìì²´ì— ëŒë ¤ì„œ ì„ íƒí•œ {keyword} ìš©í’ˆë“¤. ì§„ì§œ ì¢‹ì€ ê±´ ë‹¤ë¥´ë”ë¼ê³ ìš”.',
                        'ğŸ” ë””í…Œì¼ì— ì§‘ì¤‘í•´ë³´ì„¸ìš”. {achievement} ìˆœê°„ì— ëŠê»´ì§€ëŠ” ëª¨ë“  ê°ê°ë“¤ì´ ì–¼ë§ˆë‚˜ ì†Œì¤‘í•œì§€...'
                    ]
                }
            },
            videoTypes: [
                { 
                    value: 'shorts', 
                    label: 'YouTube Shorts (15-60ì´ˆ)', 
                    icon: 'ğŸ“±',
                    trend: 'HOT',
                    description: 'ë¬´í•´ë ¥ ì½˜í…ì¸  ëŒ€ì„¸'
                },
                { 
                    value: 'reaction', 
                    label: 'ë¦¬ì•¡ì…˜ ì˜ìƒ (3-10ë¶„)', 
                    icon: 'ğŸ˜±',
                    trend: 'TRENDING',
                    description: 'ì‹¤ì‹œê°„ ì†Œí†µ íŠ¸ë Œë“œ'
                },
                { 
                    value: 'long-form', 
                    label: 'ë¡±í¼ ì½˜í…ì¸  (30ë¶„+)', 
                    icon: 'ğŸ¬',
                    trend: 'NEW',
                    description: 'ê¹Šì´ ìˆëŠ” ìŠ¤í† ë¦¬í…”ë§'
                },
                { 
                    value: 'live', 
                    label: 'ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼', 
                    icon: 'ğŸ”´',
                    trend: 'LIVE',
                    description: 'ì‹¤ì‹œê°„ ì»¤ë®¤ë‹ˆí‹°'
                },
                { 
                    value: 'sketch', 
                    label: 'ìŠ¤ì¼€ì¹˜ ì½”ë¯¸ë”” (5-15ë¶„)', 
                    icon: 'ğŸ­',
                    trend: 'VIRAL',
                    description: 'ìˆë°•ìŠ¤ ìŠ¤íƒ€ì¼ ì¸ê¸°'
                }
            ],
            emotions: [
                { value: 'excited', label: 'í¥ë¯¸ì§„ì§„í•œ', emoji: 'ğŸ”¥', trend: 'HOT' },
                { value: 'grateful', label: 'ê°ì‚¬í•œ', emoji: 'ğŸ™', trend: '' },
                { value: 'determined', label: 'ì˜ì§€ì— ì°¬', emoji: 'ğŸ’ª', trend: '' },
                { value: 'reflective', label: 'ëŒì•„ë³´ëŠ”', emoji: 'ğŸ’­', trend: 'DEEP' },
                { value: 'proud', label: 'ìë‘ìŠ¤ëŸ¬ìš´', emoji: 'âœ¨', trend: '' },
                { value: 'harmless', label: 'ë¬´í•´í•œ', emoji: 'ğŸ˜‡', trend: 'TRENDING' },
                { value: 'authentic', label: 'ì§„ì†”í•œ', emoji: 'ğŸ’¯', trend: 'NEW' }
            ]
        };

        // Mock function to simulate real-time trend analysis
        async function analyzeTrends(formData) {
            // Simulate API call delay
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            const trendKeywords = [];
            const currentHour = new Date().getHours();
            
            // Time-based trending
            if (currentHour >= 6 && currentHour <= 9) {
                trendKeywords.push('ìƒˆë²½í›ˆë ¨', 'ëª¨ë‹ë£¨í‹´', 'ì¼ì°ì¼ì–´ë‚˜ê¸°ì±Œë¦°ì§€');
            } else if (currentHour >= 18 && currentHour <= 22) {
                trendKeywords.push('í‡´ê·¼í›„ìš´ë™', 'ì €ë…ë£¨í‹´', 'ì•¼ê°„í›ˆë ¨');
            }
            
            // Sport-specific trending
            const sportTrends = {
                'ì¶•êµ¬': ['ë°œë¡±ë„ë¥´2025', 'ì›”ë“œì»µì˜ˆì„ ', 'ì†í¥ë¯¼ì±Œë¦°ì§€'],
                'ë†êµ¬': ['NBA2025', '3ì ìŠ›ì±Œë¦°ì§€', 'ë©í¬ì±Œë¦°ì§€'],
                'ìˆ˜ì˜': ['ì˜¬ë¦¼í”½ì¤€ë¹„', 'ììœ í˜•ì±Œë¦°ì§€', 'ìˆ˜ì˜ë‹¤ì´ì–´íŠ¸'],
                'ì•¼êµ¬': ['WBC2025', 'í™ˆëŸ°ì±Œë¦°ì§€', 'íˆ¬êµ¬í¼ë¶„ì„'],
                'í…Œë‹ˆìŠ¤': ['ìœ”ë¸”ë˜2025', 'ì„œë¸Œì±Œë¦°ì§€', 'ë°±í•¸ë“œë§ˆìŠ¤í„°']
            };
            
            if (formData.sport && sportTrends[formData.sport]) {
                trendKeywords.push(...sportTrends[formData.sport]);
            }
            
            // Add general 2025 trends
            trendKeywords.push('ë¬´í•´ë ¥', 'ë¦¬ì•¡ì…˜ì½˜í…ì¸ ', 'ë¡±í¼ì˜ìƒ', 'AIë¶„ì„', 'ì‹¤ì‹œê°„ì†Œí†µ');
            
            return {
                keywords: trendKeywords,
                analysis: `2025ë…„ ${formData.sport} íŠ¸ë Œë“œ ë¶„ì„: ${trendKeywords.slice(0, 3).join(', ')} ë“±ì´ ê¸‰ìƒìŠ¹ ì¤‘ì…ë‹ˆë‹¤.`,
                confidence: Math.floor(Math.random() * 20) + 80, // 80-100%
                timestamp: new Date().toISOString()
            };
        }

        // Enhanced Mention Generation with Multiple Emotions
        async function generateMention() {
            const generateBtn = document.getElementById('generateBtn');
            const originalText = generateBtn.innerHTML;
            
            // Validate emotions selection
            if (!validateEmotions()) {
                showEmotionValidationError();
                return;
            }
            
            // Show loading state
            generateBtn.innerHTML = `
                <i data-lucide="loader-2" class="w-6 h-6 animate-spin"></i>
                ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë¶„ì„ ì¤‘...
                <i data-lucide="wifi" class="w-6 h-6"></i>
            `;
            generateBtn.disabled = true;
            
            try {
                let trendData = null;
                
                if (appState.realtimeTrendsEnabled) {
                    // Show trend analysis status
                    showTrendStatus('ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë¶„ì„ ì¤‘...', 'analyzing');
                    
                    // Analyze current trends
                    trendData = await analyzeTrends(appState.formData);
                    appState.currentTrends = trendData;
                    
                    showTrendStatus('ìµœì‹  íŠ¸ë Œë“œ ë¶„ì„ ì™„ë£Œ!', 'success');
                }
                
                // Generate mention with trend data
                const mention = generateTrendAwareMention(trendData);
                
                appState.generatedMention = mention;
                appState.editedMention = '';
                appState.isEditMode = false;
                
                updateUI();
                
                // Show trend analysis in UI
                if (trendData) {
                    document.getElementById('trendAnalysisText').textContent = trendData.analysis;
                }
                
            } catch (error) {
                console.error('Error generating mention:', error);
                showTrendStatus('íŠ¸ë Œë“œ ë¶„ì„ ì‹¤íŒ¨ - ê¸°ë³¸ ëª¨ë“œë¡œ ìƒì„±', 'error');
                
                // Fallback to basic generation
                const mention = generateBasicMention();
                appState.generatedMention = mention;
                updateUI();
            } finally {
                // Restore button
                generateBtn.innerHTML = originalText;
                generateBtn.disabled = false;
                lucide.createIcons();
            }
        }

        function validateEmotions() {
            return appState.formData.emotions.length >= 1 && appState.formData.emotions.length <= 2;
        }

        function showEmotionValidationError() {
            const errorElement = document.getElementById('emotionValidationError');
            const emotionContainer = document.getElementById('emotionContainer');
            
            errorElement.classList.remove('hidden');
            emotionContainer.classList.add('emotion-validation-error');
            
            // Remove error styling after 3 seconds
            setTimeout(() => {
                errorElement.classList.add('hidden');
                emotionContainer.classList.remove('emotion-validation-error');
            }, 3000);
        }

        function generateTrendAwareMention(trendData) {
            const { formData } = appState;
            const trendElement = realtimeTrendData.trendElements[formData.trendElement] || realtimeTrendData.trendElements['realtime-storytelling'];
            
            // Select pattern and customize with real-time data
            const patterns = trendElement.patterns;
            const selectedPattern = patterns[Math.floor(Math.random() * patterns.length)];
            
            // Replace placeholders with actual data
            let customizedPattern = selectedPattern
                .replace('{keyword}', formData.keywords || 'ìš´ë™')
                .replace('{sport}', formData.sport || 'ìŠ¤í¬ì¸ ')
                .replace('{achievement}', formData.achievement || 'ì„±ê³¼')
                .replace('{challenge}', formData.challenge || 'ë„ì „')
                .replace('{period}', '6ê°œì›”');
            
            // Build complete mention with multiple emotions
            const videoTypeInfo = realtimeTrendData.videoTypes.find(v => v.value === formData.videoType);
            const videoText = getVideoTypeText(formData.videoType, videoTypeInfo);
            
            // Select trending hashtags
            const trendingHashtags = selectTrendingHashtags(trendData, formData);
            
            // Add real-time insights with combined emotions
            const insights = generateTrendInsights(trendData, formData);
            const goals = generateFutureGoals(formData);
            const emotionText = generateEmotionText(formData.emotions);
            
            const mention = `${customizedPattern}

${emotionText}

${insights}

${goals}

${videoText}

${trendingHashtags}

#${formData.sport} #2025íŠ¸ë Œë“œ #ì‹¤ì‹œê°„`;

            return mention;
        }

        function generateEmotionText(selectedEmotions) {
            if (selectedEmotions.length === 0) return '';
            
            const emotionData = realtimeTrendData.emotions.filter(e => selectedEmotions.includes(e.value));
            
            if (emotionData.length === 1) {
                const emotion = emotionData[0];
                return `${emotion.emoji} ${emotion.label} ë§ˆìŒìœ¼ë¡œ ì´ ìˆœê°„ì„ ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”.`;
            } else if (emotionData.length === 2) {
                const [emotion1, emotion2] = emotionData;
                return `${emotion1.emoji} ${emotion1.label}í•˜ë©´ì„œë„ ${emotion2.emoji} ${emotion2.label} ê¸°ë¶„ì´ì—ìš”. ì´ëŸ° ë³µì¡í•œ ê°ì •ë„ í•¨ê»˜ ëŠê»´ë³´ì„¸ìš”.`;
            }
            
            return '';
        }

        function generateBasicMention() {
            // Fallback basic generation with multiple emotions support
            const { formData } = appState;
            
            const hooks = {
                excited: ['ğŸ”¥ ì´ ìˆœê°„ì„ ìœ„í•´ ì–¼ë§ˆë‚˜ ê¸°ë‹¤ë ¸ëŠ”ì§€...', 'âš¡ ë“œë””ì–´ í•´ëƒˆë‹¤!', 'ğŸš€ ìƒìƒë„ ëª»í–ˆë˜ ì¼ì´...'],
                grateful: ['ğŸ™ ëª¨ë“  ë¶„ë“¤ ë•ë¶„ì—...', 'â¤ï¸ ì •ë§ ê°ì‚¬í•œ ë§ˆìŒìœ¼ë¡œ...', 'âœ¨ ì´ëŸ° ê¸°íšŒë¥¼ ì£¼ì‹ ...'],
                determined: ['ğŸ’ª í¬ê¸°í•˜ì§€ ì•Šê¸¸ ì •ë§ ì˜í–ˆì–´ìš”', 'ğŸ¯ ëª©í‘œë¥¼ í–¥í•œ í•œ ê±¸ìŒ', 'âš¡ ë” ê°•í•´ì§€ê¸° ìœ„í•´...'],
                reflective: ['ğŸ’­ ëŒì´ì¼œë³´ë©´...', 'ğŸ“– ê·¸ë•Œ ê·¸ ìˆœê°„ì´...', 'ğŸŒŸ ì´ ì—¬ì •ì„ í†µí•´ ë°°ìš´ ê²ƒì€...'],
                proud: ['âœ¨ ìë‘ìŠ¤ëŸ¬ìš´ ìˆœê°„', 'ğŸ† ì´ ì„±ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒì€...', 'ğŸŒŸ ë“œë””ì–´ ì´ë£¨ì–´ë‚¸...'],
                harmless: ['ğŸ˜‡ ì‘ê³  ì†Œì†Œí•œ ë³€í™”ê°€...', 'ğŸŒ¸ ìˆœìˆ˜í•œ ë§ˆìŒìœ¼ë¡œ...', 'â˜€ï¸ í‰ë²”í•œ ì¼ìƒ ì†ì—ì„œ...'],
                authentic: ['ğŸ’¯ ì§„ì§œ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ë“œë¦´ê²Œìš”', 'ğŸ¯ ê°€ì‹ ì—†ì´ ì†”ì§í•˜ê²Œ...', 'ğŸ“· ì¹´ë©”ë¼ ë’¤ì˜ ì§„ì‹¤ì€...']
            };

            // Select hook based on first emotion or random if none
            const primaryEmotion = formData.emotions.length > 0 ? formData.emotions[0] : 'excited';
            const selectedHook = hooks[primaryEmotion][Math.floor(Math.random() * hooks[primaryEmotion].length)];
            const basicHashtags = realtimeTrendData.hashtags.trending.slice(0, 8).join(' ');
            const emotionText = generateEmotionText(formData.emotions);
            
            return `${selectedHook}

${emotionText}

ğŸ“– ${formData.keywords || 'ìš´ë™'}ì˜ ì—¬ì •ì´ ì´ë ‡ê²Œ ì˜ë¯¸ìˆì„ ì¤„ ëª°ëì–´ìš”.

ğŸ’ª ${formData.achievement || 'ì´ ì„±ê³¼'}ë¥¼ ì´ë£¨ê¸°ê¹Œì§€ì˜ ê³¼ì •ì„ ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”.

ğŸ¥ ìì„¸í•œ ì´ì•¼ê¸°ëŠ” ì˜ìƒì—ì„œ í™•ì¸í•´ì£¼ì„¸ìš”!

${basicHashtags}

#${formData.sport} #2025íŠ¸ë Œë“œ #ìœ íŠœë¸Œ`;
        }

        function selectTrendingHashtags(trendData, formData) {
            let hashtags = [...realtimeTrendData.hashtags.trending];
            
            // Add sport-specific hashtags
            if (formData.sport) {
                hashtags.push(...realtimeTrendData.hashtags.sports);
            }
            
            // Add real-time trending keywords
            if (trendData && trendData.keywords) {
                trendData.keywords.forEach(keyword => {
                    hashtags.push(`#${keyword}`);
                });
            }
            
            // Remove duplicates and select random subset
            hashtags = [...new Set(hashtags)];
            const selectedHashtags = hashtags
                .sort(() => 0.5 - Math.random())
                .slice(0, 10);
            
            return selectedHashtags.join(' ');
        }

        function generateTrendInsights(trendData, formData) {
            const insights = [
                `âš¡ ${formData.keywords}ë¥¼ í†µí•´ ë°°ìš´ ê°€ì¥ í° êµí›ˆì€ 'ê¾¸ì¤€í•¨ì´ ì¬ëŠ¥ì„ ì´ê¸´ë‹¤'ëŠ” ê²ƒ`,
                `ğŸ¯ ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ë„ì „í•˜ëŠ” ìš©ê¸°ê°€ ê°€ì¥ ì¤‘ìš”í•œ ìì‚°`,
                `ğŸ’¡ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤, ì„±ì¥í•˜ëŠ” ê³¼ì • ìì²´ê°€ ì•„ë¦„ë‹µë‹¤`,
                `ğŸŒŸ ê²½ìŸë³´ë‹¤ëŠ” ì–´ì œì˜ ë‚˜ì™€ì˜ ë¹„êµê°€ ì§„ì •í•œ ì„±ì¥ì˜ ê¸°ì¤€`,
                `ğŸ¤ í˜¼ìê°€ ì•„ë‹ˆë¼ í•¨ê»˜í•  ë•Œ ë” í° í˜ì´ ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒ`,
                `ğŸ§  ëª¸ë§Œí¼ ë§ˆìŒë„ ë‹¨ë‹¨í•´ì ¸ì•¼ í•œë‹¤ëŠ” ê±¸ ë°°ì› ì–´ìš”`,
                `ğŸ“Š ë°ì´í„°ê°€ ì•Œë ¤ì¤€ ì‘ì€ ë³€í™”ë“¤ì´ ê²°êµ­ í° ì„±ê³¼ë¡œ ì´ì–´ì¡Œì–´ìš”`
            ];
            
            return insights[Math.floor(Math.random() * insights.length)];
        }

        function generateFutureGoals(formData) {
            const goals = [
                `ğŸ¯ ë‹¤ìŒ ëª©í‘œëŠ” ${formData.keywords}ì—ì„œ í•œ ë‹¨ê³„ ë” ì„±ì¥í•˜ëŠ” ê²ƒ`,
                `ğŸš€ ì´ë²ˆ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ë” í° ë¬´ëŒ€ì— ë„ì „í•˜ê³  ì‹¶ì–´ìš”`,
                `ğŸ’ª ê¾¸ì¤€í•œ í›ˆë ¨ìœ¼ë¡œ ë‚´ë…„ì—ëŠ” ë” ë°œì „ëœ ëª¨ìŠµ ë³´ì—¬ë“œë¦´ê²Œìš”`,
                `ğŸŒŸ í›„ë°°ë“¤ì—ê²Œë„ ì¢‹ì€ ë¡¤ëª¨ë¸ì´ ë˜ê³  ì‹¶ìŠµë‹ˆë‹¤`,
                `â­ ê¶ê·¹ì ìœ¼ë¡œëŠ” ${formData.sport}ì—ì„œ ìµœê³ ê°€ ë˜ëŠ” ê·¸ë‚ ê¹Œì§€`,
                `ğŸª ìƒˆë¡œìš´ ì±Œë¦°ì§€ë¡œ ì—¬ëŸ¬ë¶„ê³¼ í•¨ê»˜ ì„±ì¥í•´ë‚˜ê°€ê² ìŠµë‹ˆë‹¤`,
                `ğŸ“ˆ ë” ë§ì€ ë¶„ë“¤ê³¼ ì´ ê²½í—˜ì„ ë‚˜ëˆ„ê³  ì‹¶ì–´ìš”`
            ];
            
            return goals[Math.floor(Math.random() * goals.length)];
        }

        function getVideoTypeText(videoType, videoTypeInfo) {
            const videoTexts = {
                shorts: 'ğŸ“± 60ì´ˆë¡œ ì••ì¶•í•œ ì´ ìˆœê°„, ë†“ì¹˜ì§€ ë§ˆì„¸ìš”! #Shorts',
                reaction: 'ğŸ˜± ì—¬ëŸ¬ë¶„ì˜ ì‹¤ì‹œê°„ ë¦¬ì•¡ì…˜ì´ ê¶ê¸ˆí•´ìš”! ëŒ“ê¸€ë¡œ í•¨ê»˜í•´ì£¼ì„¸ìš”',
                'long-form': 'ğŸ¬ 30ë¶„ ë¡±í¼ìœ¼ë¡œ ê¹Šì´ ìˆëŠ” ì´ì•¼ê¸°ë¥¼ ì¤€ë¹„í–ˆì–´ìš”. ëê¹Œì§€ í•¨ê»˜í•´ì£¼ì„¸ìš”',
                live: 'ğŸ”´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ê³¼ ë‚˜ëˆ„ê³  ì‹¶ì—ˆë˜ ì´ì•¼ê¸°',
                sketch: 'ğŸ­ ì¬ë¯¸ìˆê²Œ ê°ìƒ‰í•œ ìŠ¤í† ë¦¬! ì›ƒìœ¼ë©´ì„œ ë´ì£¼ì„¸ìš”'
            };
            
            return videoTexts[videoType] || videoTexts.shorts;
        }

        function showTrendStatus(message, type) {
            const trendStatus = document.getElementById('trendStatus');
            const trendStatusText = document.getElementById('trendStatusText');
            
            trendStatus.classList.remove('hidden');
            trendStatusText.textContent = message;
            
            // Update styling based on type
            const statusDiv = trendStatus.querySelector('div');
            statusDiv.className = 'bg-blue-500/20 border border-blue-500/30 rounded-lg p-3';
            
            if (type === 'success') {
                statusDiv.className = 'bg-green-500/20 border border-green-500/30 rounded-lg p-3';
            } else if (type === 'error') {
                statusDiv.className = 'bg-red-500/20 border border-red-500/30 rounded-lg p-3';
            } else if (type === 'analyzing') {
                statusDiv.className = 'bg-orange-500/20 border border-orange-500/30 rounded-lg p-3';
            }
        }

        // UI Updates (Enhanced)
        function updateUI() {
            const emptyState = document.getElementById('emptyState');
            const generatedContent = document.getElementById('generatedContent');
            const mentionDisplay = document.getElementById('mentionDisplay');
            const editMode = document.getElementById('editMode');
            const mentionText = document.getElementById('mentionText');
            const editTextarea = document.getElementById('editTextarea');

            if (appState.generatedMention) {
                emptyState.classList.add('hidden');
                generatedContent.classList.remove('hidden');

                if (appState.isEditMode) {
                    mentionDisplay.classList.add('hidden');
                    editMode.classList.remove('hidden');
                    editTextarea.value = appState.editedMention || appState.generatedMention;
                } else {
                    mentionDisplay.classList.remove('hidden');
                    editMode.classList.add('hidden');
                    mentionText.textContent = appState.editedMention || appState.generatedMention;
                }

                updateActionButtons();
            } else {
                emptyState.classList.remove('hidden');
                generatedContent.classList.add('hidden');
                document.getElementById('trendStatus').classList.add('hidden');
            }
        }

        function updateActionButtons() {
            const actionButtons = document.getElementById('actionButtons');
            
            if (appState.isEditMode) {
                actionButtons.innerHTML = `
                    <button id="saveEditBtn" class="flex-1 btn-success text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded-xl flex items-center justify-center gap-2 text-base sm:text-lg shadow-lg hover-lift">
                        <i data-lucide="check" class="w-5 h-5"></i>
                        í¸ì§‘ ì™„ë£Œ
                    </button>
                    <button id="cancelEditBtn" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded-xl transition-all duration-200 flex items-center justify-center gap-2 text-base sm:text-lg shadow-lg hover-lift">
                        ì·¨ì†Œ
                    </button>
                `;
                
                document.getElementById('saveEditBtn').addEventListener('click', saveEdit);
                document.getElementById('cancelEditBtn').addEventListener('click', cancelEdit);
            } else {
                actionButtons.innerHTML = `
                    <button id="editBtn" class="flex-1 btn-secondary text-white font-bold py-3 sm:py-4 px-4 sm:px-6 rounded-xl flex items-center justify-center gap-2 text-base sm:text-lg shadow-lg hover-lift">
                        <i data-lucide="edit-3" class="w-5 h-5"></i>
                        í¸ì§‘í•˜ê¸°
                    </button>
                    <button id="copyBtn" class="flex-1 btn-white py-3 sm:py-4 px-4 sm:px-6 rounded-xl font-bold flex items-center justify-center gap-2 text-base sm:text-lg shadow-lg hover-lift">
                        <i data-lucide="copy" class="w-5 h-5"></i>
                        ë³µì‚¬í•˜ê¸°
                    </button>
                `;
                
                document.getElementById('editBtn').addEventListener('click', startEdit);
                document.getElementById('copyBtn').addEventListener('click', () => copyToClipboard(appState.editedMention || appState.generatedMention));
            }
            
            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        // Edit Functions
        function startEdit() {
            appState.isEditMode = true;
            appState.editedMention = appState.editedMention || appState.generatedMention;
            updateUI();
        }

        function saveEdit() {
            appState.editedMention = document.getElementById('editTextarea').value;
            appState.isEditMode = false;
            updateUI();
        }

        function cancelEdit() {
            appState.isEditMode = false;
            appState.editedMention = '';
            updateUI();
        }

        // Copy to Clipboard
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showToast('ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë©˜ì…˜ ë³µì‚¬ ì™„ë£Œ! ğŸ”¥');
            } catch (err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ë©˜ì…˜ ë³µì‚¬ ì™„ë£Œ! ğŸ”¥');
            }
        }

        // Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.classList.remove('translate-y-full', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            
            // Add fade-in animation
            toast.classList.add('fade-in');
            
            setTimeout(() => {
                toast.classList.add('translate-y-full', 'opacity-0');
                toast.classList.remove('translate-y-0', 'opacity-100', 'fade-in');
            }, 3000);
        }

        // Emotion Counter Update
        function updateEmotionCounter() {
            const counter = document.getElementById('emotionCounter');
            const count = appState.formData.emotions.length;
            counter.textContent = `${count}/2`;
            
            if (count === 0) {
                counter.style.background = 'linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.2))';
                counter.style.borderColor = 'rgba(239, 68, 68, 0.3)';
                counter.style.color = '#ef4444';
            } else if (count === 1) {
                counter.style.background = 'linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.2))';
                counter.style.borderColor = 'rgba(251, 191, 36, 0.3)';
                counter.style.color = '#fbbf24';
            } else {
                counter.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2))';
                counter.style.borderColor = 'rgba(16, 185, 129, 0.3)';
                counter.style.color = '#10b981';
            }
        }

        // Form Input Handlers (Enhanced for multiple emotions)
        function setupFormInputs() {
            // Text inputs
            ['keywords', 'sport', 'achievement', 'challenge'].forEach(field => {
                const element = document.getElementById(field);
                if (element) {
                    element.addEventListener('input', (e) => {
                        appState.formData[field] = e.target.value;
                    });
                }
            });
            
            // Date input
            const dateElement = document.getElementById('date');
            if (dateElement) {
                // Set today's date as default
                dateElement.value = new Date().toISOString().split('T')[0];
                dateElement.addEventListener('input', (e) => {
                    appState.formData.date = e.target.value;
                });
            }

            // Real-time trend toggle
            const realtimeTrendToggle = document.getElementById('realtimeTrendToggle');
            realtimeTrendToggle.addEventListener('change', (e) => {
                appState.realtimeTrendsEnabled = e.target.checked;
            });

            // Video types with trend indicators
            const videoTypeContainer = document.getElementById('videoTypeContainer');
            realtimeTrendData.videoTypes.forEach(type => {
                const label = document.createElement('label');
                label.className = 'radio-option flex items-center gap-4 p-4 rounded-xl cursor-pointer transition-all';
                
                const trendBadge = type.trend ? `<span class="trend-badge">${type.trend}</span>` : '';
                
                label.innerHTML = `
                    <input type="radio" name="videoType" value="${type.value}" ${type.value === 'shorts' ? 'checked' : ''} class="sr-only">
                    <div class="w-5 h-5 rounded-full border-2 border-white/30 flex items-center justify-center">
                        <div class="w-2.5 h-2.5 rounded-full bg-blue-400 opacity-0 transition-opacity"></div>
                    </div>
                    <span class="text-2xl">${type.icon}</span>
                    <div class="flex-1">
                        <div class="text-white text-base sm:text-lg font-medium flex items-center gap-2">
                            ${type.label} ${trendBadge}
                        </div>
                        <div class="text-gray-300 text-xs sm:text-sm">${type.description}</div>
                    </div>
                `;
                
                const radio = label.querySelector('input');
                const indicator = label.querySelector('div > div');
                
                radio.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        appState.formData.videoType = e.target.value;
                        
                        // Update all radio indicators
                        document.querySelectorAll('input[name="videoType"]').forEach(r => {
                            const parentLabel = r.closest('label');
                            const ind = parentLabel.querySelector('div > div');
                            if (r.checked) {
                                parentLabel.classList.add('selected');
                                ind.style.opacity = '1';
                            } else {
                                parentLabel.classList.remove('selected');
                                ind.style.opacity = '0';
                            }
                        });
                    }
                });
                
                // Set initial state
                if (type.value === 'shorts') {
                    label.classList.add('selected');
                    indicator.style.opacity = '1';
                }
                
                videoTypeContainer.appendChild(label);
            });

            // Emotions with checkbox functionality (1-2 selections)
            const emotionContainer = document.getElementById('emotionContainer');
            realtimeTrendData.emotions.forEach(emotion => {
                const label = document.createElement('label');
                label.className = 'checkbox-option flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all';
                
                const trendBadge = emotion.trend ? `<span class="trend-badge">${emotion.trend}</span>` : '';
                
                label.innerHTML = `
                    <input type="checkbox" name="emotion" value="${emotion.value}" class="sr-only">
                    <div class="w-4 h-4 rounded border-2 border-white/30 flex items-center justify-center">
                        <i data-lucide="check" class="w-3 h-3 text-pink-400 opacity-0 transition-opacity"></i>
                    </div>
                    <span class="text-xl">${emotion.emoji}</span>
                    <div class="flex-1">
                        <span class="text-white text-sm sm:text-base font-medium flex items-center gap-2">
                            ${emotion.label} ${trendBadge}
                        </span>
                    </div>
                `;
                
                const checkbox = label.querySelector('input');
                const indicator = label.querySelector('i');
                
                checkbox.addEventListener('change', (e) => {
                    const value = e.target.value;
                    const isChecked = e.target.checked;
                    
                    if (isChecked) {
                        // Check if we can add more emotions (max 2)
                        if (appState.formData.emotions.length >= 2) {
                            e.target.checked = false;
                            showToast('ìµœëŒ€ 2ê°œê¹Œì§€ë§Œ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
                            return;
                        }
                        
                        if (!appState.formData.emotions.includes(value)) {
                            appState.formData.emotions.push(value);
                        }
                        
                        label.classList.add('selected');
                        indicator.style.opacity = '1';
                    } else {
                        const index = appState.formData.emotions.indexOf(value);
                        if (index > -1) {
                            appState.formData.emotions.splice(index, 1);
                        }
                        
                        label.classList.remove('selected');
                        indicator.style.opacity = '0';
                    }
                    
                    // Update counter
                    updateEmotionCounter();
                    
                    // Clear validation error if exists
                    if (appState.formData.emotions.length >= 1) {
                        document.getElementById('emotionValidationError').classList.add('hidden');
                        emotionContainer.classList.remove('emotion-validation-error');
                    }
                });
                
                emotionContainer.appendChild(label);
            });

            // Trend elements with real-time options
            const trendElementContainer = document.getElementById('trendElementContainer');
            const trendElements = [
                { value: 'realtime-storytelling', label: 'ì‹¤ì‹œê°„ ìŠ¤í† ë¦¬í…”ë§', desc: 'AI íŠ¸ë Œë“œ ë¶„ì„ ê¸°ë°˜', trend: 'AI' },
                { value: 'reaction-content', label: 'ë¦¬ì•¡ì…˜ ì½˜í…ì¸ ', desc: 'ì‹¤ì‹œê°„ ì†Œí†µ ì¤‘ì‹¬', trend: 'HOT' },
                { value: 'long-form', label: 'ë¡±í¼ ì½˜í…ì¸ ', desc: 'ê¹Šì´ ìˆëŠ” ì´ì•¼ê¸°', trend: 'NEW' },
                { value: 'sketch-comedy', label: 'ìŠ¤ì¼€ì¹˜ ì½”ë¯¸ë””', desc: 'ìˆë°•ìŠ¤ ìŠ¤íƒ€ì¼', trend: 'VIRAL' },
                { value: 'omni-vore', label: 'ì˜´ë‹ˆë³´ì–´', desc: 'ê²½ê³„ ì—†ëŠ” ì½˜í…ì¸ ', trend: 'TREND' },
                { value: 'avoha', label: '#ì•„ë³´í•˜', desc: 'í‰ë²”í•œ ì¼ìƒì˜ íŠ¹ë³„í•¨', trend: 'CORE' },
                { value: 'face-tech', label: 'í˜ì´ìŠ¤í…Œí¬', desc: 'ê¸°ìˆ  ê¸°ë°˜ ë¶„ì„', trend: 'TECH' },
                { value: 'material-charm', label: 'ë¬¼ì„±ë§¤ë ¥', desc: 'ë””í…Œì¼ ì¤‘ì‹¬', trend: 'DETAIL' }
            ];

            trendElements.forEach(element => {
                const label = document.createElement('label');
                label.className = 'radio-option flex items-start gap-4 p-4 rounded-xl cursor-pointer transition-all';
                
                const trendBadge = element.trend ? `<span class="trend-badge">${element.trend}</span>` : '';
                
                label.innerHTML = `
                    <input type="radio" name="trendElement" value="${element.value}" ${element.value === 'realtime-storytelling' ? 'checked' : ''} class="sr-only">
                    <div class="w-5 h-5 rounded-full border-2 border-white/30 flex items-center justify-center mt-1">
                        <div class="w-2.5 h-2.5 rounded-full bg-yellow-400 opacity-0 transition-opacity"></div>
                    </div>
                    <div class="flex-1">
                        <div class="text-white font-bold text-base sm:text-lg flex items-center gap-2">
                            ${element.label} ${trendBadge}
                        </div>
                        <div class="text-gray-300 text-sm sm:text-base mt-1">${element.desc}</div>
                    </div>
                `;
                
                const radio = label.querySelector('input');
                const indicator = label.querySelector('div > div');
                
                radio.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        appState.formData.trendElement = e.target.value;
                        
                        // Update all radio indicators
                        document.querySelectorAll('input[name="trendElement"]').forEach(r => {
                            const parentLabel = r.closest('label');
                            const ind = parentLabel.querySelector('div > div');
                            if (r.checked) {
                                parentLabel.classList.add('selected');
                                ind.style.opacity = '1';
                            } else {
                                parentLabel.classList.remove('selected');
                                ind.style.opacity = '0';
                            }
                        });
                    }
                });
                
                // Set initial state
                if (element.value === 'realtime-storytelling') {
                    label.classList.add('selected');
                    indicator.style.opacity = '1';
                }
                
                trendElementContainer.appendChild(label);
            });

            // Initialize emotion counter
            updateEmotionCounter();
        }

        // PWA Functions
        function setupPWA() {
            // Install prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                appState.deferredPrompt = e;
                document.getElementById('installPrompt').classList.remove('hidden');
            });

            // Install button
            document.getElementById('installBtn').addEventListener('click', async () => {
                if (appState.deferredPrompt) {
                    appState.deferredPrompt.prompt();
                    const { outcome } = await appState.deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        document.getElementById('installPrompt').classList.add('hidden');
                    }
                    appState.deferredPrompt = null;
                }
            });

            // Dismiss button
            document.getElementById('dismissBtn').addEventListener('click', () => {
                document.getElementById('installPrompt').classList.add('hidden');
            });

            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.getElementById('installPrompt').classList.add('hidden');
            }
        }

        // Service Worker Registration
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                const swCode = `
                    const CACHE_NAME = 'realtime-youtube-mention-generator-v1';
                    const urlsToCache = ['/'];
                    
                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swURL = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swURL)
                    .then((registration) => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch((err) => {
                        console.log('ServiceWorker registration failed');
                    });
            }
        }

        // Initialize App
        function init() {
            setupFormInputs();
            setupPWA();
            registerServiceWorker();
            
            // Generate button
            document.getElementById('generateBtn').addEventListener('click', generateMention);
            
            // Initialize Lucide icons
            lucide.createIcons();
        }

        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
