<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ìœ íŠœë¸Œ íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±ê¸° 2025</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#1e1b4b">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="ë©˜ì…˜ìƒì„±ê¸°">
    <meta name="description" content="2025ë…„ ìµœì‹  ìœ íŠœë¸Œ íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•œ ìŠ¤ë§ˆíŠ¸ ë©˜ì…˜ ì œì‘ ë„êµ¬">
    
    <!-- Manifest -->
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIuycoO2KnOu4rOu4sDIwMjUg7Yq464yE65OcIOultOuckeyjvOyEse2NvCIsCiAgInNob3J0X25hbWUiOiAi66Wt7Zy474q07IW66IC16riAIiwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJ0aGVtZV9jb2xvciI6ICIjMWUxYjRiIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMWUxYjRiIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTVRJNElpQm9aV2xuYUhROUlqRXlPQ0lnZG1sbGQwSnZlRDBpTUNBd0lERXlPQ0F4TWpnaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK1BHUmxabk0rUEdkcFluSnBaVzUwSUdsa1BTSmhJaUJ5TVQwaU1DNDNJaUJ5TWowaU1DNDVJaUJuTVQwaUkzWTFOakV3TVdVaUlHY3lQU0lqTWpjeFpUWmtJaTgrUEM5blpHVm1jejRnUEhObGNtTnNaU0JqZUQwaU5qUWlJR041UFNJMk5DSWdjakU5SWpFNElpQm1hV3hzUFNKMWNtd29JMkVwSWo0OEwzTmxjbU5zWlQ0OEwyUmxabk0rUEhSbGVIUWdlRDBpTmpRaUlIazlJamMyVENJZ1ptbHNiRDBpSTJGbFptWm1aaUlnWm05dWRDMXphWHBsUFNJeE1pSWdkR1Y0ZEMxaGJtTm9iM0k5SWsxcFpIUnNaU0lnWm05dWRDMW1ZVzFwYkhsOUlqSTJMUzVTYjJKdmRHOGlQa3hyNVEyZ0lNZHpJaUJ3YUNBNGJpOWZibVEwaUNBNGFpOWNJbTBySUNBNGJpOTFZQzQ2SWladUxqOVBabThpSUVzblNBSWdjbTl1ZDJGeWFETjNJaUJ3ZEcwNkxTczNOSEY0ZDFkMElDQWlMelJzU2xJK1BDOTBaWGgwUGp3dmMzWm5QZz09IiwKICAgICAgInNpemVzIjogIjEyOHgxMjgiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIiwKICAgICAgInB1cnBvc2UiOiAiYW55IG1hc2thYmxlIgogICAgfQogIF0KfQ==">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Custom Styles -->
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #581c87 0%, #1e3a8a 50%, #312e81 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(45deg, #2563eb, #7c3aed);
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: linear-gradient(45deg, #10b981, #059669);
        }
        
        .btn-success:hover {
            background: linear-gradient(45deg, #059669, #047857);
        }
        
        .install-prompt {
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .mobile-padding {
                padding: 12px;
            }
            
            .mobile-text {
                font-size: 14px;
            }
            
            .mobile-btn {
                padding: 10px 16px;
                font-size: 14px;
            }
        }
    </style>
</head>

<body>
    <!-- PWA Install Prompt -->
    <div id="installPrompt" class="fixed top-4 left-4 right-4 z-50 glass rounded-lg shadow-lg hidden install-prompt">
        <div class="p-4 text-white flex items-center justify-between">
            <div class="flex items-center gap-3">
                <i data-lucide="smartphone" class="w-6 h-6"></i>
                <div>
                    <div class="font-semibold">í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ê¸°</div>
                    <div class="text-sm opacity-90">ì–¸ì œë“  ë¹ ë¥´ê²Œ ì ‘ê·¼í•˜ì„¸ìš”!</div>
                </div>
            </div>
            <div class="flex gap-2">
                <button id="installBtn" class="bg-white text-blue-600 px-4 py-2 rounded-lg font-semibold text-sm hover:bg-gray-100 transition-colors">
                    ì„¤ì¹˜
                </button>
                <button id="dismissBtn" class="text-white opacity-70 hover:opacity-100 p-2">
                    âœ•
                </button>
            </div>
        </div>
    </div>

    <div class="min-h-screen p-3 sm:p-6">
        <div class="max-w-4xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-6 sm:mb-8">
                <div class="flex items-center justify-center gap-2 sm:gap-3 mb-3 sm:mb-4">
                    <i data-lucide="trending-up" class="w-6 sm:w-8 h-6 sm:h-8 text-yellow-400"></i>
                    <h1 class="text-2xl sm:text-4xl font-bold text-white">ìœ íŠœë¸Œ íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±ê¸°</h1>
                    <i data-lucide="sparkles" class="w-6 sm:w-8 h-6 sm:h-8 text-yellow-400"></i>
                </div>
                <p class="text-blue-200 text-sm sm:text-lg">2025ë…„ ìµœì‹  íŠ¸ë Œë“œë¥¼ ë°˜ì˜í•œ ìŠ¤ë§ˆíŠ¸ ë©˜ì…˜ ì œì‘ ë„êµ¬</p>
                
                <!-- Mobile Install Guide -->
                <div class="mt-4 glass rounded-lg p-3 border block sm:hidden">
                    <div class="flex items-center justify-center gap-2 text-blue-200 text-xs">
                        <i data-lucide="download" class="w-4 h-4"></i>
                        <span>í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì—¬ ì•±ì²˜ëŸ¼ ì‚¬ìš©í•˜ì„¸ìš”!</span>
                    </div>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-4 sm:gap-8">
                <!-- Input Form -->
                <div class="glass rounded-2xl p-4 sm:p-6">
                    <h2 class="text-xl sm:text-2xl font-semibold text-white mb-4 sm:mb-6 flex items-center gap-2">
                        <i data-lucide="tag" class="w-5 sm:w-6 h-5 sm:h-6"></i>
                        ì½˜í…ì¸  ì •ë³´ ì…ë ¥
                    </h2>

                    <div class="space-y-4 sm:space-y-6">
                        <!-- Keywords -->
                        <div>
                            <label class="block text-white font-medium mb-2 text-sm sm:text-base">í•µì‹¬ í‚¤ì›Œë“œ</label>
                            <input type="text" id="keywords" placeholder="ì˜ˆ: ì¶•êµ¬, ìˆ˜ì˜, ë†êµ¬ ë“±"
                                class="w-full p-2 sm:p-3 rounded-lg glass border border-white/30 text-white placeholder-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm sm:text-base">
                        </div>

                        <!-- Sport -->
                        <div>
                            <label class="block text-white font-medium mb-2 text-sm sm:text-base">ìŠ¤í¬ì¸  ì¢…ëª©</label>
                            <input type="text" id="sport" placeholder="êµ¬ì²´ì ì¸ ì¢…ëª©ëª… ì…ë ¥"
                                class="w-full p-2 sm:p-3 rounded-lg glass border border-white/30 text-white placeholder-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm sm:text-base">
                        </div>

                        <!-- Date -->
                        <div>
                            <label class="block text-white font-medium mb-2 flex items-center gap-2 text-sm sm:text-base">
                                <i data-lucide="calendar" class="w-4 h-4"></i>
                                ë‚ ì§œ
                            </label>
                            <input type="date" id="date"
                                class="w-full p-2 sm:p-3 rounded-lg glass border border-white/30 text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm sm:text-base">
                        </div>

                        <!-- Achievement -->
                        <div>
                            <label class="block text-white font-medium mb-2 text-sm sm:text-base">ì£¼ìš” ì„±ê³¼/ìˆœê°„</label>
                            <input type="text" id="achievement" placeholder="ì˜ˆ: ê°œì¸ ìµœê³  ê¸°ë¡ ë‹¬ì„±, ì²« ìŠ¹ë¦¬ ë“±"
                                class="w-full p-2 sm:p-3 rounded-lg glass border border-white/30 text-white placeholder-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm sm:text-base">
                        </div>

                        <!-- Challenge -->
                        <div>
                            <label class="block text-white font-medium mb-2 text-sm sm:text-base">ê·¹ë³µí•œ ì–´ë ¤ì›€</label>
                            <input type="text" id="challenge" placeholder="ì˜ˆ: ë¶€ìƒ íšŒë³µ, ìŠ¬ëŸ¼í”„ ê·¹ë³µ ë“±"
                                class="w-full p-2 sm:p-3 rounded-lg glass border border-white/30 text-white placeholder-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm sm:text-base">
                        </div>

                        <!-- Video Type -->
                        <div>
                            <label class="block text-white font-medium mb-2 flex items-center gap-2 text-sm sm:text-base">
                                <i data-lucide="video" class="w-4 h-4"></i>
                                ì˜ìƒ íƒ€ì…
                            </label>
                            <div class="grid grid-cols-1 gap-2" id="videoTypeContainer">
                                <!-- Video type options will be inserted here -->
                            </div>
                        </div>

                        <!-- Emotion -->
                        <div>
                            <label class="block text-white font-medium mb-2 flex items-center gap-2 text-sm sm:text-base">
                                <i data-lucide="heart" class="w-4 h-4"></i>
                                ê°ì •/í†¤
                            </label>
                            <div class="grid grid-cols-2 gap-2" id="emotionContainer">
                                <!-- Emotion options will be inserted here -->
                            </div>
                        </div>

                        <!-- Trend Element -->
                        <div>
                            <label class="block text-white font-medium mb-2 flex items-center gap-2 text-sm sm:text-base">
                                <i data-lucide="zap" class="w-4 h-4"></i>
                                2025 íŠ¸ë Œë“œ ìš”ì†Œ
                            </label>
                            <div class="space-y-2" id="trendElementContainer">
                                <!-- Trend element options will be inserted here -->
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button id="generateBtn" class="w-full btn-primary text-white font-semibold py-3 sm:py-4 px-4 sm:px-6 rounded-lg flex items-center justify-center gap-2 text-base sm:text-lg">
                            <i data-lucide="sparkles" class="w-4 sm:w-5 h-4 sm:h-5"></i>
                            íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±í•˜ê¸°
                            <i data-lucide="refresh-cw" class="w-4 sm:w-5 h-4 sm:h-5"></i>
                        </button>
                    </div>
                </div>

                <!-- Generated Mention -->
                <div class="glass rounded-2xl p-4 sm:p-6">
                    <h2 class="text-xl sm:text-2xl font-semibold text-white mb-4 sm:mb-6 flex items-center gap-2">
                        <i data-lucide="target" class="w-5 sm:w-6 h-5 sm:h-6"></i>
                        ìƒì„±ëœ ë©˜ì…˜
                    </h2>

                    <!-- Empty State -->
                    <div id="emptyState" class="glass rounded-lg p-6 sm:p-8 text-center">
                        <i data-lucide="users" class="w-12 sm:w-16 h-12 sm:h-16 text-gray-400 mx-auto mb-4"></i>
                        <p class="text-gray-300 text-base sm:text-lg">
                            ì •ë³´ë¥¼ ì…ë ¥í•˜ê³  'íŠ¸ë Œë“œ ë©˜ì…˜ ìƒì„±í•˜ê¸°'ë¥¼ í´ë¦­í•´ì£¼ì„¸ìš”
                        </p>
                        <p class="text-gray-400 text-xs sm:text-sm mt-2">
                            2025ë…„ ìµœì‹  íŠ¸ë Œë“œê°€ ë°˜ì˜ëœ ë§ì¶¤ ë©˜ì…˜ì„ ì œì‘í•´ë“œë¦½ë‹ˆë‹¤
                        </p>
                    </div>

                    <!-- Generated Content -->
                    <div id="generatedContent" class="space-y-3 sm:space-y-4 hidden">
                        <!-- Mention Display -->
                        <div id="mentionDisplay" class="glass rounded-lg p-3 sm:p-4 min-h-[250px] sm:min-h-[300px]">
                            <pre id="mentionText" class="text-white whitespace-pre-wrap font-medium leading-relaxed text-sm sm:text-base"></pre>
                        </div>

                        <!-- Edit Mode -->
                        <div id="editMode" class="glass rounded-lg p-3 sm:p-4 hidden">
                            <textarea id="editTextarea" placeholder="ë©˜ì…˜ì„ í¸ì§‘í•´ì£¼ì„¸ìš”..."
                                class="w-full h-64 sm:h-80 bg-transparent text-white placeholder-gray-300 border-none outline-none resize-none font-medium leading-relaxed text-sm sm:text-base"></textarea>
                        </div>

                        <!-- Action Buttons -->
                        <div id="actionButtons" class="flex gap-2">
                            <!-- Normal mode buttons -->
                        </div>

                        <!-- Translate Button -->
                        <button id="translateBtn" class="w-full btn-success text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-lg flex items-center justify-center gap-2 text-sm sm:text-base">
                            <i data-lucide="globe" class="w-4 sm:w-5 h-4 sm:h-5"></i>
                            <span id="translateText">ì˜ë¬¸ìœ¼ë¡œ ë²ˆì—­í•˜ê¸°</span>
                        </button>

                        <!-- Translation Result -->
                        <div id="translationResult" class="bg-green-500/20 border border-green-500/30 rounded-lg p-3 sm:p-4 hidden">
                            <div class="flex items-center gap-2 mb-3">
                                <i data-lucide="globe" class="w-4 sm:w-5 h-4 sm:h-5 text-green-400"></i>
                                <span class="text-green-300 font-semibold text-sm sm:text-base">ì˜ë¬¸ ë²ˆì—­ ê²°ê³¼</span>
                            </div>
                            <div class="glass rounded-lg p-3 sm:p-4 mb-3">
                                <pre id="translatedText" class="text-white whitespace-pre-wrap font-medium leading-relaxed text-sm sm:text-base"></pre>
                            </div>
                            <button id="copyTranslatedBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-3 sm:px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base">
                                <i data-lucide="copy" class="w-3 sm:w-4 h-3 sm:h-4"></i>
                                ì˜ë¬¸ ë©˜ì…˜ ë³µì‚¬í•˜ê¸°
                            </button>
                        </div>

                        <!-- Tips -->
                        <div class="bg-yellow-500/20 border border-yellow-500/30 rounded-lg p-3 sm:p-4">
                            <div class="flex items-start gap-2">
                                <i data-lucide="sparkles" class="w-4 sm:w-5 h-4 sm:h-5 text-yellow-400 mt-1"></i>
                                <div>
                                    <div class="text-yellow-300 font-semibold mb-1 text-sm sm:text-base">2025 íŠ¸ë Œë“œ íŒ</div>
                                    <div class="text-yellow-100 text-xs sm:text-sm">
                                        ìƒì„±ëœ ë©˜ì…˜ì€ 2025ë…„ ìœ íŠœë¸Œ ì•Œê³ ë¦¬ì¦˜ê³¼ ì‚¬ìš©ì ì„ í˜¸ë„ë¥¼ ë°˜ì˜í–ˆìŠµë‹ˆë‹¤. 
                                        í¸ì§‘ ê¸°ëŠ¥ìœ¼ë¡œ ê°œì¸ì ì¸ í„°ì¹˜ë¥¼ ì¶”ê°€í•˜ê³ , ê¸€ë¡œë²Œ ì§„ì¶œì„ ìœ„í•´ ì˜ë¬¸ ë²ˆì—­ë„ í™œìš©í•´ë³´ì„¸ìš”!
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="mt-6 sm:mt-8 text-center">
                <div class="glass rounded-lg p-3 sm:p-4">
                    <p class="text-blue-200 text-xs sm:text-sm">
                        ğŸ’¡ <strong>2025 íŠ¸ë Œë“œ ê¸°ë°˜:</strong> YouTube Shorts ìµœì í™”, ë¼ì´ë¸Œ ì†Œí†µ, ìŠ¤í† ë¦¬í…”ë§, ë©˜íƒˆ í—¬ìŠ¤, ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬
                        <br class="hidden sm:block">
                        <span class="block sm:inline mt-1 sm:mt-0">
                            âœ¨ <strong>ìƒˆë¡œìš´ ê¸°ëŠ¥:</strong> ë©˜ì…˜ í¸ì§‘, ì˜ë¬¸ ë²ˆì—­ìœ¼ë¡œ ê¸€ë¡œë²Œ ì§„ì¶œê¹Œì§€!
                        </span>
                    </p>
                </div>
                
                <!-- Mobile Install Help -->
                <div class="mt-4 bg-blue-500/20 border border-blue-500/30 rounded-lg p-3 block sm:hidden">
                    <div class="text-blue-200 text-xs">
                        <div class="font-semibold mb-1">ğŸ“± í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ëŠ” ë°©ë²•</div>
                        <div>iPhone: Safari â†’ ê³µìœ  â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</div>
                        <div>Android: Chrome â†’ ë©”ë‰´ â†’ í™ˆ í™”ë©´ì— ì¶”ê°€</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 glass rounded-lg p-4 text-white transform translate-y-full opacity-0 transition-all duration-300 z-50">
        <div class="flex items-center gap-2">
            <i data-lucide="check" class="w-5 h-5 text-green-400"></i>
            <span id="toastMessage">ë³µì‚¬ ì™„ë£Œ!</span>
        </div>
    </div>

    <script>
        // App State
        let appState = {
            formData: {
                keywords: '',
                date: '',
                videoType: 'shorts',
                sport: '',
                emotion: 'excited',
                trendElement: 'storytelling',
                achievement: '',
                challenge: ''
            },
            generatedMention: '',
            editedMention: '',
            translatedMention: '',
            isEditMode: false,
            isTranslating: false,
            deferredPrompt: null
        };

        // Data
        const videoTypes = [
            { value: 'shorts', label: 'YouTube Shorts (15-60ì´ˆ)', icon: 'ğŸ“±' },
            { value: 'regular', label: 'ì¼ë°˜ ì˜ìƒ (3-8ë¶„)', icon: 'ğŸ¥' },
            { value: 'live', label: 'ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼', icon: 'ğŸ”´' },
            { value: 'series', label: 'ì‹œë¦¬ì¦ˆ ì˜ìƒ', icon: 'ğŸ“º' }
        ];

        const emotions = [
            { value: 'excited', label: 'í¥ë¯¸ì§„ì§„í•œ', emoji: 'ğŸ”¥' },
            { value: 'grateful', label: 'ê°ì‚¬í•œ', emoji: 'ğŸ™' },
            { value: 'determined', label: 'ì˜ì§€ì— ì°¬', emoji: 'ğŸ’ª' },
            { value: 'reflective', label: 'ëŒì•„ë³´ëŠ”', emoji: 'ğŸ’­' },
            { value: 'proud', label: 'ìë‘ìŠ¤ëŸ¬ìš´', emoji: 'âœ¨' }
        ];

        const trendElements = [
            { value: 'storytelling', label: 'ìŠ¤í† ë¦¬í…”ë§', desc: 'ê°œì¸ì  ì—¬ì • ê³µìœ ' },
            { value: 'behind-scenes', label: 'ë¹„í•˜ì¸ë“œ ì‹ ', desc: 'í›ˆë ¨ ê³¼ì • ê³µê°œ' },
            { value: 'mental-health', label: 'ë©˜íƒˆ ì¼€ì–´', desc: 'ì •ì‹  ê±´ê°• ì¤‘ì‹œ' },
            { value: 'community', label: 'ì»¤ë®¤ë‹ˆí‹°', desc: 'íŒ¬ê³¼ì˜ ì†Œí†µ' },
            { value: 'tech-data', label: 'ë°ì´í„° í™œìš©', desc: 'ê¸°ìˆ ì  ë¶„ì„' },
            { value: 'challenge', label: 'ì±Œë¦°ì§€', desc: 'ë°”ì´ëŸ´ ì°¸ì—¬' }
        ];

        const trendingHashtags2025 = [
            '#Shorts', '#ì£¼ë‹ˆì–´ì„ ìˆ˜', '#ì„±ì¥ìŠ¤í† ë¦¬', '#ê¿ˆì„í–¥í•´', '#ë©˜íƒˆê°•í™”',
            '#ë°ì´í„°ë¶„ì„', '#ì»¤ë®¤ë‹ˆí‹°', '#ì§„ì •ì„±', '#ë¹„í•˜ì¸ë“œ', '#ë¼ì´ë¸Œì†Œí†µ',
            '#ìŠ¤í† ë¦¬í…”ë§', '#ì˜ê°', '#ë„ì „', '#ê·¹ë³µ', '#íŒ€ì›Œí¬'
        ];

        // Translation Function
        function translateToEnglish(koreanText) {
            let translatedText = koreanText;

            // Complete sentence patterns
            const sentencePatterns = [
                { from: /ğŸ”¥\s*ì´\s*ìˆœê°„ì„\s*ìœ„í•´\s*ì–¼ë§ˆë‚˜\s*ê¸°ë‹¤ë ¸ëŠ”ì§€\.{3}/g, to: 'ğŸ”¥ How long I\'ve been waiting for this moment...' },
                { from: /âš¡\s*ë“œë””ì–´\s*í•´ëƒˆë‹¤!/g, to: 'âš¡ Finally made it!' },
                { from: /ğŸš€\s*ìƒìƒë„\s*ëª»í–ˆë˜\s*ì¼ì´\.{3}/g, to: 'ğŸš€ Something I never imagined...' },
                { from: /ğŸ™\s*ëª¨ë“ \s*ë¶„ë“¤\s*ë•ë¶„ì—\.{3}/g, to: 'ğŸ™ Thanks to everyone...' },
                { from: /â¤ï¸\s*ì •ë§\s*ê°ì‚¬í•œ\s*ë§ˆìŒìœ¼ë¡œ\.{3}/g, to: 'â¤ï¸ With a truly grateful heart...' },
                { from: /âœ¨\s*ì´ëŸ°\s*ê¸°íšŒë¥¼\s*ì£¼ì‹ \.{3}/g, to: 'âœ¨ For giving me this opportunity...' },
                { from: /ğŸ’ª\s*í¬ê¸°í•˜ì§€\s*ì•Šê¸¸\s*ì •ë§\s*ì˜í–ˆì–´ìš”/g, to: 'ğŸ’ª I\'m so glad I didn\'t give up' },
                { from: /ğŸ¯\s*ëª©í‘œë¥¼\s*í–¥í•œ\s*í•œ\s*ê±¸ìŒ/g, to: 'ğŸ¯ One step towards the goal' },
                { from: /âš¡\s*ë”\s*ê°•í•´ì§€ê¸°\s*ìœ„í•´\.{3}/g, to: 'âš¡ To become stronger...' },
                { from: /ğŸ’­\s*ëŒì´ì¼œë³´ë©´\.{3}/g, to: 'ğŸ’­ Looking back...' },
                { from: /ğŸ“–\s*ê·¸ë•Œ\s*ê·¸\s*ìˆœê°„ì´\.{3}/g, to: 'ğŸ“– That moment back then...' },
                { from: /ğŸŒŸ\s*ì´\s*ì—¬ì •ì„\s*í†µí•´\s*ë°°ìš´\s*ê²ƒì€\.{3}/g, to: 'ğŸŒŸ What I learned through this journey...' },
                { from: /âœ¨\s*ìë‘ìŠ¤ëŸ¬ìš´\s*ìˆœê°„/g, to: 'âœ¨ A proud moment' },
                { from: /ğŸ†\s*ì´\s*ì„±ê³¼ê°€\s*ì˜ë¯¸í•˜ëŠ”\s*ê²ƒì€\.{3}/g, to: 'ğŸ† What this achievement means...' },
                { from: /ğŸŒŸ\s*ë“œë””ì–´\s*ì´ë£¨ì–´ë‚¸\.{3}/g, to: 'ğŸŒŸ Finally achieved...' },
                
                // Story sentences
                { from: /ğŸ“–\s*(.+?)ë¥¼\s*ì²˜ìŒ\s*ì‹œì‘í–ˆì„\s*ë•Œë§Œ\s*í•´ë„\s*ì´ëŸ°\s*ë‚ ì´\s*ì˜¬\s*ì¤„\s*ëª°ëì–´ìš”\./g, to: 'ğŸ“– When I first started $1, I never knew this day would come.' },
                { from: /ğŸ“š\s*ì˜ˆì „ì˜\s*ì €ì—ê²Œ\s*ë§í•´ì£¼ê³ \s*ì‹¶ì–´ìš”\.\s*"(.+?)ì—ì„œ\s*í¬ê¸°í•˜ì§€\s*ë§ˆ,\s*ë„¤ê°€\s*ê¿ˆê¾¸ë˜\s*ê·¸\s*ìˆœê°„ì´\s*ì •ë§\s*ì˜¬\s*ê±°ì•¼"ë¼ê³ ìš”\./g, to: 'ğŸ“š I want to tell my past self: "Don\'t give up on $1, that moment you dreamed of will really come."' },
                
                // Other patterns
                { from: /âš¡\s*(.+?)ë¥¼\s*í†µí•´\s*ë°°ìš´\s*ê°€ì¥\s*í°\s*êµí›ˆì€\s*'ê¾¸ì¤€í•¨ì´\s*ì¬ëŠ¥ì„\s*ì´ê¸´ë‹¤'ëŠ”\s*ê²ƒ/g, to: 'âš¡ The biggest lesson I learned through $1 is that \'consistency beats talent\'' },
                { from: /ğŸ¯\s*ë‹¤ìŒ\s*ëª©í‘œëŠ”\s*(.+?)ì—ì„œ\s*í•œ\s*ë‹¨ê³„\s*ë”\s*ì„±ì¥í•˜ëŠ”\s*ê²ƒ/g, to: 'ğŸ¯ My next goal is to grow one step further in $1' },
                { from: /ğŸ“±\s*60ì´ˆë¡œ\s*ì••ì¶•í•œ\s*ì´\s*ìˆœê°„,\s*ë†“ì¹˜ì§€\s*ë§ˆì„¸ìš”!/g, to: 'ğŸ“± This moment compressed into 60 seconds, don\'t miss it!' },
                { from: /ğŸ¥\s*ìì„¸í•œ\s*ì´ì•¼ê¸°ëŠ”\s*ì˜ìƒì—ì„œ\s*í™•ì¸í•´ì£¼ì„¸ìš”!/g, to: 'ğŸ¥ Check out the video for the detailed story!' },
                { from: /ğŸ”´\s*ì‹¤ì‹œê°„ìœ¼ë¡œ\s*ì—¬ëŸ¬ë¶„ê³¼\s*ë‚˜ëˆ„ê³ \s*ì‹¶ì—ˆë˜\s*ì´ì•¼ê¸°/g, to: 'ğŸ”´ A story I wanted to share with you in real time' },
                { from: /ğŸ“º\s*ì‹œë¦¬ì¦ˆë¡œ\s*ê³„ì†\s*ì´ì–´ì§‘ë‹ˆë‹¤,\s*ë‹¤ìŒ\s*í¸ë„\s*ê¸°ëŒ€í•´ì£¼ì„¸ìš”!/g, to: 'ğŸ“º This series continues, please look forward to the next episode!' }
            ];

            // Word translations
            const wordTranslations = {
                'ê·¸ë¦¬ê³ ': 'and', 'ë˜í•œ': 'also', 'í•˜ì§€ë§Œ': 'but', 'ê·¸ëŸ¬ë‚˜': 'however',
                'ë•Œë¬¸ì—': 'because of', 'ë•ë¶„ì—': 'thanks to', 'í†µí•´': 'through',
                'ìœ„í•´': 'for', 'í•¨ê»˜': 'together', 'í˜¼ì': 'alone',
                'ì •ë§': 'really', 'ë„ˆë¬´': 'so', 'ë§¤ìš°': 'very', 'ì¡°ê¸ˆ': 'a little',
                'ë§ì´': 'a lot', 'ì „í˜€': 'not at all', 'í•­ìƒ': 'always', 'ê°€ë”': 'sometimes',
                'ì˜¤ëŠ˜': 'today', 'ì–´ì œ': 'yesterday', 'ë‚´ì¼': 'tomorrow',
                'ì§€ê¸ˆ': 'now', 'ë‚˜ì¤‘ì—': 'later', 'ë¨¼ì €': 'first',
                'ë§ˆì§€ë§‰': 'last', 'ì²˜ìŒ': 'first time',
                
                // Sports related
                'ì„ ìˆ˜': 'athlete', 'ì½”ì¹˜': 'coach', 'íŒ€': 'team',
                'ê²½ê¸°': 'game', 'ì‹œí•©': 'match', 'ëŒ€íšŒ': 'tournament',
                'í›ˆë ¨': 'training', 'ì—°ìŠµ': 'practice', 'ê¸°ë¡': 'record',
                'ìš°ìŠ¹': 'championship', 'ìŠ¹ë¦¬': 'victory', 'íŒ¨ë°°': 'defeat',
                'ì‹¤ë ¥': 'skill', 'ê¸°ìˆ ': 'technique', 'ì „ìˆ ': 'tactics',
                
                // Hashtags
                '#ì£¼ë‹ˆì–´ì„ ìˆ˜': '#JuniorAthlete',
                '#ì„±ì¥ìŠ¤í† ë¦¬': '#GrowthStory',
                '#ê¿ˆì„í–¥í•´': '#TowardTheDream',
                '#ë©˜íƒˆê°•í™”': '#MentalStrength',
                '#ë°ì´í„°ë¶„ì„': '#DataAnalysis',
                '#ì»¤ë®¤ë‹ˆí‹°': '#Community',
                '#ì§„ì •ì„±': '#Authenticity',
                '#ë¹„í•˜ì¸ë“œ': '#BehindTheScenes',
                '#ë¼ì´ë¸Œì†Œí†µ': '#LiveCommunication',
                '#ìŠ¤í† ë¦¬í…”ë§': '#Storytelling',
                '#ì˜ê°': '#Inspiration',
                '#ë„ì „': '#Challenge',
                '#ê·¹ë³µ': '#Overcome',
                '#íŒ€ì›Œí¬': '#Teamwork',
                '#2025íŠ¸ë Œë“œ': '#2025Trends',
                '#ìœ íŠœë¸Œ': '#YouTube'
            };

            // Apply sentence patterns
            sentencePatterns.forEach(({ from, to }) => {
                translatedText = translatedText.replace(from, to);
            });

            // Apply word translations
            Object.entries(wordTranslations).forEach(([korean, english]) => {
                if (english) {
                    const regex = new RegExp(`\\b${korean.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')}\\b`, 'g');
                    translatedText = translatedText.replace(regex, english);
                } else {
                    const regex = new RegExp(korean.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                    translatedText = translatedText.replace(regex, '');
                }
            });

            // Grammar patterns
            translatedText = translatedText.replace(/([ê°€-í£]+)í•˜ë©°/g, 'while $1ing');
            translatedText = translatedText.replace(/([ê°€-í£]+)í–ˆë˜/g, '$1 that I did');
            translatedText = translatedText.replace(/([ê°€-í£]+)í•œë‹¤ëŠ”/g, 'that I $1');
            translatedText = translatedText.replace(/([ê°€-í£]+)í•˜ëŠ”/g, '$1ing');
            translatedText = translatedText.replace(/([ê°€-í£]+)í–ˆì–´ìš”/g, 'I $1ed');
            translatedText = translatedText.replace(/([ê°€-í£]+)í• ê²Œìš”/g, 'I will $1');
            translatedText = translatedText.replace(/([ê°€-í£]+)í•˜ê³ /g, '$1 and');

            // Final cleanup
            translatedText = translatedText.replace(/\s+/g, ' ');
            translatedText = translatedText.replace(/\s+([.!?])/g, '$1');
            translatedText = translatedText.trim();

            return translatedText;
        }

        // Mention Generation
        function generateMention() {
            const hooks = {
                excited: ['ğŸ”¥ ì´ ìˆœê°„ì„ ìœ„í•´ ì–¼ë§ˆë‚˜ ê¸°ë‹¤ë ¸ëŠ”ì§€...', 'âš¡ ë“œë””ì–´ í•´ëƒˆë‹¤!', 'ğŸš€ ìƒìƒë„ ëª»í–ˆë˜ ì¼ì´...'],
                grateful: ['ğŸ™ ëª¨ë“  ë¶„ë“¤ ë•ë¶„ì—...', 'â¤ï¸ ì •ë§ ê°ì‚¬í•œ ë§ˆìŒìœ¼ë¡œ...', 'âœ¨ ì´ëŸ° ê¸°íšŒë¥¼ ì£¼ì‹ ...'],
                determined: ['ğŸ’ª í¬ê¸°í•˜ì§€ ì•Šê¸¸ ì •ë§ ì˜í–ˆì–´ìš”', 'ğŸ¯ ëª©í‘œë¥¼ í–¥í•œ í•œ ê±¸ìŒ', 'âš¡ ë” ê°•í•´ì§€ê¸° ìœ„í•´...'],
                reflective: ['ğŸ’­ ëŒì´ì¼œë³´ë©´...', 'ğŸ“– ê·¸ë•Œ ê·¸ ìˆœê°„ì´...', 'ğŸŒŸ ì´ ì—¬ì •ì„ í†µí•´ ë°°ìš´ ê²ƒì€...'],
                proud: ['âœ¨ ìë‘ìŠ¤ëŸ¬ìš´ ìˆœê°„', 'ğŸ† ì´ ì„±ê³¼ê°€ ì˜ë¯¸í•˜ëŠ” ê²ƒì€...', 'ğŸŒŸ ë“œë””ì–´ ì´ë£¨ì–´ë‚¸...']
            };

            const storyElements = {
                storytelling: [
                    `ğŸ“– ${appState.formData.keywords}ë¥¼ ì²˜ìŒ ì‹œì‘í–ˆì„ ë•Œë§Œ í•´ë„ ì´ëŸ° ë‚ ì´ ì˜¬ ì¤„ ëª°ëì–´ìš”. ë§¤ì¼ ${appState.formData.challenge || 'í›ˆë ¨'}í•˜ë©° ëŠê¼ˆë˜ ê·¸ ìˆœê°„ë“¤ì´ ì˜¤ëŠ˜ ${appState.formData.achievement || 'ì´ ì„±ê³¼'}ë¡œ ì´ì–´ì¡ŒìŠµë‹ˆë‹¤.`,
                    `ğŸ“š ì˜ˆì „ì˜ ì €ì—ê²Œ ë§í•´ì£¼ê³  ì‹¶ì–´ìš”. "${appState.formData.keywords}ì—ì„œ í¬ê¸°í•˜ì§€ ë§ˆ, ë„¤ê°€ ê¿ˆê¾¸ë˜ ê·¸ ìˆœê°„ì´ ì •ë§ ì˜¬ ê±°ì•¼"ë¼ê³ ìš”.`
                ],
                'behind-scenes': [
                    `ğŸƒâ€â™€ï¸ ì¹´ë©”ë¼ì— ë‹´ê¸°ì§€ ì•Šì€ ìƒˆë²½ í›ˆë ¨, ì“°ë¼ë¦° ì‹¤íŒ¨ë“¤... ê·¸ ëª¨ë“  ê³¼ì •ì´ ì˜¤ëŠ˜ì˜ ${appState.formData.achievement || 'ì„±ê³¼'}ë¥¼ ë§Œë“¤ì—ˆì–´ìš”.`,
                    `â° ìƒˆë²½ 5ì‹œ í›ˆë ¨ì¥, ì•„ë¬´ë„ ë³´ì§€ ì•ŠëŠ” ê³³ì—ì„œì˜ ë…¸ë ¥ë“¤ì´ ë“œë””ì–´ ë¹›ì„ ë³´ëŠ” ìˆœê°„ì…ë‹ˆë‹¤.`
                ],
                'mental-health': [
                    `ğŸ§  ëª¸ë§Œí¼ ë§ˆìŒë„ ë‹¨ë‹¨í•´ì ¸ì•¼ í•œë‹¤ëŠ” ê±¸ ë°°ì› ì–´ìš”. ì••ë°•ê°ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì´ê²¨ë‚´ëŠ” ê²ƒë„ ì‹¤ë ¥ì˜ ì¼ë¶€ë¼ëŠ” ê²ƒì„...`,
                    `ğŸ’š ì„ ìˆ˜ë¡œì„œì˜ ì„±ì¥ë¿ë§Œ ì•„ë‹ˆë¼ í•œ ì‚¬ëŒìœ¼ë¡œì„œì˜ ì„±ì¥ë„ ì¤‘ìš”í•˜ë‹¤ëŠ” ê±¸ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤.`
                ],
                community: [
                    `ğŸ‘¥ í˜¼ìì„œëŠ” ì ˆëŒ€ í•  ìˆ˜ ì—†ì—ˆì„ ì¼ì´ì—ìš”. ì‘ì›í•´ì£¼ì‹  ëª¨ë“  ë¶„ë“¤ê³¼ í•¨ê»˜ ì´ë¤„ë‚¸ ì„±ê³¼ì…ë‹ˆë‹¤!`,
                    `ğŸ¤ ëŒ“ê¸€ë¡œ ê²©ë ¤í•´ì£¼ì‹œê³ , ë¼ì´ë¸Œì—ì„œ í•¨ê»˜í•´ì£¼ì‹  ëª¨ë“  ë¶„ë“¤ ë•ë¶„ì— ì—¬ê¸°ê¹Œì§€ ì˜¬ ìˆ˜ ìˆì—ˆì–´ìš”.`
                ],
                'tech-data': [
                    `ğŸ“Š ë°ì´í„°ê°€ ë³´ì—¬ì¤€ ì‘ì€ ë³€í™”ë“¤ì´ ê²°êµ­ í° ì„±ê³¼ë¡œ ì´ì–´ì¡Œì–´ìš”. ìˆ˜ì¹˜ë¡œ í™•ì¸í•˜ë‹ˆ ë”ìš± ë¿Œë“¯í•©ë‹ˆë‹¤!`,
                    `âŒš ì›¨ì–´ëŸ¬ë¸” ê¸°ê¸°ê°€ ì•Œë ¤ì¤€ ì œ í•œê³„ë¥¼ í•˜ë‚˜ì”© ë›°ì–´ë„˜ëŠ” ì¬ë¯¸ê°€ ìˆì–´ìš”.`
                ],
                challenge: [
                    `ğŸ¯ ${appState.formData.keywords} ì±Œë¦°ì§€ì— ì°¸ì—¬í•˜ë©´ì„œ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ë°œê²¬í–ˆì–´ìš”!`,
                    `ğŸŒŸ íŠ¸ë Œë“œì— ë§ì¶° ë„ì „í•´ë³´ë‹ˆ ì˜ˆìƒì¹˜ ëª»í•œ ì¬ë¯¸ì™€ ì„±ì¥ì´ ìˆì—ˆìŠµë‹ˆë‹¤.`
                ]
            };

            const insights = [
                `âš¡ ${appState.formData.keywords}ë¥¼ í†µí•´ ë°°ìš´ ê°€ì¥ í° êµí›ˆì€ 'ê¾¸ì¤€í•¨ì´ ì¬ëŠ¥ì„ ì´ê¸´ë‹¤'ëŠ” ê²ƒ`,
                `ğŸ¯ ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³  ë„ì „í•˜ëŠ” ìš©ê¸°ê°€ ê°€ì¥ ì¤‘ìš”í•œ ìì‚°`,
                `ğŸ’¡ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤, ì„±ì¥í•˜ëŠ” ê³¼ì • ìì²´ê°€ ì•„ë¦„ë‹µë‹¤`,
                `ğŸŒŸ ê²½ìŸë³´ë‹¤ëŠ” ì–´ì œì˜ ë‚˜ì™€ì˜ ë¹„êµê°€ ì§„ì •í•œ ì„±ì¥ì˜ ê¸°ì¤€`,
                `ğŸ¤ í˜¼ìê°€ ì•„ë‹ˆë¼ í•¨ê»˜í•  ë•Œ ë” í° í˜ì´ ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒ`
            ];

            const nextGoals = [
                `ğŸ¯ ë‹¤ìŒ ëª©í‘œëŠ” ${appState.formData.keywords}ì—ì„œ í•œ ë‹¨ê³„ ë” ì„±ì¥í•˜ëŠ” ê²ƒ`,
                `ğŸš€ ì´ë²ˆ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ë” í° ë¬´ëŒ€ì— ë„ì „í•˜ê³  ì‹¶ì–´ìš”`,
                `ğŸ’ª ê¾¸ì¤€í•œ í›ˆë ¨ìœ¼ë¡œ ë‚´ë…„ì—ëŠ” ë” ë°œì „ëœ ëª¨ìŠµ ë³´ì—¬ë“œë¦´ê²Œìš”`,
                `ğŸŒŸ í›„ë°°ë“¤ì—ê²Œë„ ì¢‹ì€ ë¡¤ëª¨ë¸ì´ ë˜ê³  ì‹¶ìŠµë‹ˆë‹¤`,
                `â­ ê¶ê·¹ì ìœ¼ë¡œëŠ” ${appState.formData.sport}ì—ì„œ ìµœê³ ê°€ ë˜ëŠ” ê·¸ë‚ ê¹Œì§€`
            ];

            const videoTypeTexts = {
                shorts: 'ğŸ“± 60ì´ˆë¡œ ì••ì¶•í•œ ì´ ìˆœê°„, ë†“ì¹˜ì§€ ë§ˆì„¸ìš”!',
                regular: 'ğŸ¥ ìì„¸í•œ ì´ì•¼ê¸°ëŠ” ì˜ìƒì—ì„œ í™•ì¸í•´ì£¼ì„¸ìš”!',
                live: 'ğŸ”´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ê³¼ ë‚˜ëˆ„ê³  ì‹¶ì—ˆë˜ ì´ì•¼ê¸°',
                series: 'ğŸ“º ì‹œë¦¬ì¦ˆë¡œ ê³„ì† ì´ì–´ì§‘ë‹ˆë‹¤, ë‹¤ìŒ í¸ë„ ê¸°ëŒ€í•´ì£¼ì„¸ìš”!'
            };

            const selectedHook = hooks[appState.formData.emotion][Math.floor(Math.random() * hooks[appState.formData.emotion].length)];
            const selectedStory = storyElements[appState.formData.trendElement][Math.floor(Math.random() * storyElements[appState.formData.trendElement].length)];
            const selectedInsight = insights[Math.floor(Math.random() * insights.length)];
            const selectedGoal = nextGoals[Math.floor(Math.random() * nextGoals.length)];
            const videoTypeText = videoTypeTexts[appState.formData.videoType];
            
            const selectedHashtags = trendingHashtags2025
                .sort(() => 0.5 - Math.random())
                .slice(0, 8)
                .join(' ');

            const mention = `${selectedHook}

${selectedStory}

${selectedInsight}
${selectedGoal}

${videoTypeText}

${selectedHashtags}

#${appState.formData.sport} #2025íŠ¸ë Œë“œ #ìœ íŠœë¸Œ`;

            appState.generatedMention = mention;
            appState.editedMention = '';
            appState.translatedMention = '';
            appState.isEditMode = false;
            
            updateUI();
        }

        // UI Updates
        function updateUI() {
            const emptyState = document.getElementById('emptyState');
            const generatedContent = document.getElementById('generatedContent');
            const mentionDisplay = document.getElementById('mentionDisplay');
            const editMode = document.getElementById('editMode');
            const mentionText = document.getElementById('mentionText');
            const editTextarea = document.getElementById('editTextarea');
            const actionButtons = document.getElementById('actionButtons');
            const translateBtn = document.getElementById('translateBtn');
            const translationResult = document.getElementById('translationResult');

            if (appState.generatedMention) {
                emptyState.classList.add('hidden');
                generatedContent.classList.remove('hidden');

                if (appState.isEditMode) {
                    mentionDisplay.classList.add('hidden');
                    editMode.classList.remove('hidden');
                    editTextarea.value = appState.editedMention || appState.generatedMention;
                } else {
                    mentionDisplay.classList.remove('hidden');
                    editMode.classList.add('hidden');
                    mentionText.textContent = appState.editedMention || appState.generatedMention;
                }

                updateActionButtons();
                translateBtn.classList.remove('hidden');

                if (appState.translatedMention) {
                    translationResult.classList.remove('hidden');
                    document.getElementById('translatedText').textContent = appState.translatedMention;
                } else {
                    translationResult.classList.add('hidden');
                }
            } else {
                emptyState.classList.remove('hidden');
                generatedContent.classList.add('hidden');
            }
        }

        function updateActionButtons() {
            const actionButtons = document.getElementById('actionButtons');
            
            if (appState.isEditMode) {
                actionButtons.innerHTML = `
                    <button id="saveEditBtn" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base">
                        <i data-lucide="check" class="w-4 sm:w-5 h-4 sm:h-5"></i>
                        í¸ì§‘ ì™„ë£Œ
                    </button>
                    <button id="cancelEditBtn" class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base">
                        ì·¨ì†Œ
                    </button>
                `;
                
                document.getElementById('saveEditBtn').addEventListener('click', saveEdit);
                document.getElementById('cancelEditBtn').addEventListener('click', cancelEdit);
            } else {
                actionButtons.innerHTML = `
                    <button id="editBtn" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 sm:py-3 px-3 sm:px-4 rounded-lg transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base">
                        <i data-lucide="edit-3" class="w-4 sm:w-5 h-4 sm:h-5"></i>
                        í¸ì§‘í•˜ê¸°
                    </button>
                    <button id="copyBtn" class="flex-1 py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-2 text-sm sm:text-base bg-white text-gray-800 hover:bg-gray-100">
                        <i data-lucide="copy" class="w-4 sm:w-5 h-4 sm:h-5"></i>
                        ë³µì‚¬í•˜ê¸°
                    </button>
                `;
                
                document.getElementById('editBtn').addEventListener('click', startEdit);
                document.getElementById('copyBtn').addEventListener('click', () => copyToClipboard(appState.editedMention || appState.generatedMention));
            }
            
            // Re-initialize Lucide icons
            lucide.createIcons();
        }

        // Edit Functions
        function startEdit() {
            appState.isEditMode = true;
            appState.editedMention = appState.editedMention || appState.generatedMention;
            updateUI();
        }

        function saveEdit() {
            appState.editedMention = document.getElementById('editTextarea').value;
            appState.isEditMode = false;
            appState.translatedMention = '';
            updateUI();
        }

        function cancelEdit() {
            appState.isEditMode = false;
            appState.editedMention = '';
            updateUI();
        }

        // Translation
        async function handleTranslate() {
            if (appState.isTranslating) return;
            
            appState.isTranslating = true;
            const translateText = document.getElementById('translateText');
            const originalText = translateText.textContent;
            
            translateText.innerHTML = 'ë²ˆì—­ ì¤‘... <i data-lucide="refresh-cw" class="w-4 sm:w-5 h-4 sm:h-5 spin inline"></i>';
            lucide.createIcons();
            
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            const textToTranslate = appState.editedMention || appState.generatedMention;
            appState.translatedMention = translateToEnglish(textToTranslate);
            appState.isTranslating = false;
            
            translateText.textContent = originalText;
            updateUI();
        }

        // Copy to Clipboard
        async function copyToClipboard(text) {
            try {
                await navigator.clipboard.writeText(text);
                showToast('ë³µì‚¬ ì™„ë£Œ!');
            } catch (err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast('ë³µì‚¬ ì™„ë£Œ!');
            }
        }

        // Toast Notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            toast.classList.remove('translate-y-full', 'opacity-0');
            toast.classList.add('translate-y-0', 'opacity-100');
            
            setTimeout(() => {
                toast.classList.add('translate-y-full', 'opacity-0');
                toast.classList.remove('translate-y-0', 'opacity-100');
            }, 3000);
        }

        // Form Input Handlers
        function setupFormInputs() {
            // Text inputs
            ['keywords', 'sport', 'date', 'achievement', 'challenge'].forEach(field => {
                const element = document.getElementById(field);
                element.addEventListener('input', (e) => {
                    appState.formData[field] = e.target.value;
                });
            });

            // Video types
            const videoTypeContainer = document.getElementById('videoTypeContainer');
            videoTypes.forEach(type => {
                const label = document.createElement('label');
                label.className = 'flex items-center gap-3 p-2 sm:p-3 rounded-lg glass hover:bg-white/20 cursor-pointer transition-colors';
                label.innerHTML = `
                    <input type="radio" name="videoType" value="${type.value}" ${type.value === 'shorts' ? 'checked' : ''} class="text-blue-500">
                    <span class="text-lg">${type.icon}</span>
                    <span class="text-white text-sm sm:text-base">${type.label}</span>
                `;
                
                const radio = label.querySelector('input');
                radio.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        appState.formData.videoType = e.target.value;
                    }
                });
                
                videoTypeContainer.appendChild(label);
            });

            // Emotions
            const emotionContainer = document.getElementById('emotionContainer');
            emotions.forEach(emotion => {
                const label = document.createElement('label');
                label.className = 'flex items-center gap-2 p-2 rounded-lg glass hover:bg-white/20 cursor-pointer transition-colors';
                label.innerHTML = `
                    <input type="radio" name="emotion" value="${emotion.value}" ${emotion.value === 'excited' ? 'checked' : ''} class="text-blue-500">
                    <span>${emotion.emoji}</span>
                    <span class="text-white text-xs sm:text-sm">${emotion.label}</span>
                `;
                
                const radio = label.querySelector('input');
                radio.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        appState.formData.emotion = e.target.value;
                    }
                });
                
                emotionContainer.appendChild(label);
            });

            // Trend elements
            const trendElementContainer = document.getElementById('trendElementContainer');
            trendElements.forEach(element => {
                const label = document.createElement('label');
                label.className = 'flex items-start gap-3 p-2 sm:p-3 rounded-lg glass hover:bg-white/20 cursor-pointer transition-colors';
                label.innerHTML = `
                    <input type="radio" name="trendElement" value="${element.value}" ${element.value === 'storytelling' ? 'checked' : ''} class="text-blue-500 mt-1">
                    <div>
                        <div class="text-white font-medium text-sm sm:text-base">${element.label}</div>
                        <div class="text-gray-300 text-xs sm:text-sm">${element.desc}</div>
                    </div>
                `;
                
                const radio = label.querySelector('input');
                radio.addEventListener('change', (e) => {
                    if (e.target.checked) {
                        appState.formData.trendElement = e.target.value;
                    }
                });
                
                trendElementContainer.appendChild(label);
            });
        }

        // PWA Functions
        function setupPWA() {
            // Install prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                appState.deferredPrompt = e;
                document.getElementById('installPrompt').classList.remove('hidden');
            });

            // Install button
            document.getElementById('installBtn').addEventListener('click', async () => {
                if (appState.deferredPrompt) {
                    appState.deferredPrompt.prompt();
                    const { outcome } = await appState.deferredPrompt.userChoice;
                    if (outcome === 'accepted') {
                        document.getElementById('installPrompt').classList.add('hidden');
                    }
                    appState.deferredPrompt = null;
                }
            });

            // Dismiss button
            document.getElementById('dismissBtn').addEventListener('click', () => {
                document.getElementById('installPrompt').classList.add('hidden');
            });

            // Check if already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.getElementById('installPrompt').classList.add('hidden');
            }
        }

        // Service Worker Registration
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                const swCode = `
                    const CACHE_NAME = 'youtube-mention-generator-v1';
                    const urlsToCache = ['/'];
                    
                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });
                    
                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swURL = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swURL)
                    .then((registration) => {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch((err) => {
                        console.log('ServiceWorker registration failed');
                    });
            }
        }

        // Initialize App
        function init() {
            setupFormInputs();
            setupPWA();
            registerServiceWorker();
            
            // Generate button
            document.getElementById('generateBtn').addEventListener('click', generateMention);
            
            // Translate button
            document.getElementById('translateBtn').addEventListener('click', handleTranslate);
            
            // Copy translated button
            document.addEventListener('click', (e) => {
                if (e.target.id === 'copyTranslatedBtn' || e.target.closest('#copyTranslatedBtn')) {
                    copyToClipboard(appState.translatedMention);
                }
            });
            
            // Initialize Lucide icons
            lucide.createIcons();
        }

        // Start the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
